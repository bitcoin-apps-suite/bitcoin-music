"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./lib/audio/AudioEngine.ts":
/*!**********************************!*\
  !*** ./lib/audio/AudioEngine.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var tone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tone */ \"(app-pages-browser)/./node_modules/tone/build/Tone.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nclass AudioEngine {\n    static getInstance() {\n        if (!AudioEngine.instance) {\n            AudioEngine.instance = new AudioEngine();\n        }\n        return AudioEngine.instance;\n    }\n    async initialize() {\n        if (this.initialized) return;\n        try {\n            await (0,tone__WEBPACK_IMPORTED_MODULE_0__.start)();\n            console.log(\"Audio context started\");\n            // Set initial BPM\n            tone__WEBPACK_IMPORTED_MODULE_0__.Transport.bpm.value = 120;\n            // Create metronome\n            this.metronome = new tone__WEBPACK_IMPORTED_MODULE_0__.Player({\n                url: \"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhCEdNegA\",\n                loop: false\n            }).toDestination();\n            this.initialized = true;\n        } catch (error) {\n            console.error(\"Failed to initialize audio:\", error);\n        }\n    }\n    // Transport Controls\n    async play() {\n        await this.initialize();\n        if (tone__WEBPACK_IMPORTED_MODULE_0__.Transport) {\n            tone__WEBPACK_IMPORTED_MODULE_0__.Transport.start();\n        }\n        return true;\n    }\n    pause() {\n        if (this.initialized && tone__WEBPACK_IMPORTED_MODULE_0__.Transport) {\n            tone__WEBPACK_IMPORTED_MODULE_0__.Transport.pause();\n        }\n    }\n    stop() {\n        if (this.initialized && tone__WEBPACK_IMPORTED_MODULE_0__.Transport) {\n            tone__WEBPACK_IMPORTED_MODULE_0__.Transport.stop();\n            tone__WEBPACK_IMPORTED_MODULE_0__.Transport.position = 0;\n        }\n    }\n    async startRecording() {\n        await this.initialize();\n        if (!this.recorder) {\n            this.recorder = new tone__WEBPACK_IMPORTED_MODULE_0__.Recorder();\n            this.mainOut.connect(this.recorder);\n        }\n        this.recorder.start();\n        this.play();\n    }\n    async stopRecording() {\n        if (!this.recorder) return null;\n        const recording = await this.recorder.stop();\n        this.stop();\n        return recording;\n    }\n    // Track Management\n    createTrack(name) {\n        let type = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"audio\";\n        const id = \"track_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9));\n        let instrument;\n        switch(type){\n            case \"midi\":\n                instrument = new Tone.PolySynth(Tone.Synth);\n                break;\n            case \"drum\":\n                instrument = new Tone.MembraneSynth();\n                break;\n            default:\n                instrument = new Tone.Player().toDestination();\n        }\n        const channel = new Tone.Channel().toDestination();\n        instrument.connect(channel);\n        const track = {\n            id,\n            name,\n            volume: 0,\n            muted: false,\n            solo: false,\n            instrument,\n            effects: [],\n            channel\n        };\n        this.tracks.set(id, track);\n        return id;\n    }\n    getTrack(id) {\n        return this.tracks.get(id);\n    }\n    getAllTracks() {\n        return Array.from(this.tracks.values());\n    }\n    deleteTrack(id) {\n        const track = this.tracks.get(id);\n        if (track) {\n            var _track_instrument;\n            (_track_instrument = track.instrument) === null || _track_instrument === void 0 ? void 0 : _track_instrument.dispose();\n            track.channel.dispose();\n            track.effects.forEach((effect)=>effect.dispose());\n            this.tracks.delete(id);\n        }\n    }\n    // Track Controls\n    setTrackVolume(trackId, volume) {\n        const track = this.tracks.get(trackId);\n        if (track) {\n            track.volume = volume;\n            track.channel.volume.value = volume;\n        }\n    }\n    setTrackMute(trackId, muted) {\n        const track = this.tracks.get(trackId);\n        if (track) {\n            track.muted = muted;\n            track.channel.mute = muted;\n        }\n    }\n    setTrackSolo(trackId, solo) {\n        const track = this.tracks.get(trackId);\n        if (track) {\n            track.solo = solo;\n            // Implement solo logic - mute other tracks when one is soloed\n            const hasSoloTracks = Array.from(this.tracks.values()).some((t)=>t.solo);\n            this.tracks.forEach((t)=>{\n                if (hasSoloTracks) {\n                    t.channel.mute = !t.solo;\n                } else {\n                    t.channel.mute = t.muted;\n                }\n            });\n        }\n    }\n    // Audio Loading\n    async loadAudioToTrack(trackId, audioUrl) {\n        const track = this.tracks.get(trackId);\n        if (track && track.instrument instanceof Tone.Player) {\n            await track.instrument.load(audioUrl);\n        }\n    }\n    // MIDI Playback\n    playNote(trackId, note) {\n        let duration = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : \"8n\", time = arguments.length > 3 ? arguments[3] : void 0;\n        const track = this.tracks.get(trackId);\n        if (track && track.instrument) {\n            if (track.instrument instanceof Tone.PolySynth) {\n                track.instrument.triggerAttackRelease(note, duration, time);\n            } else if (track.instrument instanceof Tone.MembraneSynth) {\n                track.instrument.triggerAttackRelease(note, duration, time);\n            }\n        }\n    }\n    // Effects\n    addEffect(trackId, effectType) {\n        var // Insert effect before the channel\n        _track_instrument, _track_instrument1;\n        const track = this.tracks.get(trackId);\n        if (!track) return;\n        let effect;\n        switch(effectType){\n            case \"reverb\":\n                effect = new Tone.Reverb(2);\n                break;\n            case \"delay\":\n                effect = new Tone.FeedbackDelay(\"8n\", 0.3);\n                break;\n            case \"distortion\":\n                effect = new Tone.Distortion(0.8);\n                break;\n            case \"filter\":\n                effect = new Tone.Filter(1000, \"lowpass\");\n                break;\n            default:\n                return;\n        }\n        (_track_instrument = track.instrument) === null || _track_instrument === void 0 ? void 0 : _track_instrument.disconnect();\n        (_track_instrument1 = track.instrument) === null || _track_instrument1 === void 0 ? void 0 : _track_instrument1.chain(effect, track.channel);\n        track.effects.push(effect);\n    }\n    // Transport Control\n    setBPM(bpm) {\n        if (this.initialized && Tone.Transport) {\n            Tone.Transport.bpm.value = bpm;\n        }\n    }\n    getBPM() {\n        if (this.initialized && Tone.Transport) {\n            return Tone.Transport.bpm.value;\n        }\n        return 120;\n    }\n    getPosition() {\n        if (this.initialized && Tone.Transport) {\n            return Tone.Transport.position.toString();\n        }\n        return \"0:0:0\";\n    }\n    setPosition(position) {\n        if (this.initialized && Tone.Transport) {\n            Tone.Transport.position = position;\n        }\n    }\n    // Loop Control\n    setLoop(start, end) {\n        if (this.initialized && Tone.Transport) {\n            Tone.Transport.setLoopPoints(start, end);\n            Tone.Transport.loop = true;\n        }\n    }\n    disableLoop() {\n        if (this.initialized && Tone.Transport) {\n            Tone.Transport.loop = false;\n        }\n    }\n    // Metronome\n    toggleMetronome(enabled) {\n        if (!this.metronome || !this.initialized || !Tone.Transport) return;\n        if (enabled) {\n            // Schedule metronome clicks on every beat\n            Tone.Transport.scheduleRepeat((time)=>{\n                var _this_metronome;\n                (_this_metronome = this.metronome) === null || _this_metronome === void 0 ? void 0 : _this_metronome.start(time);\n            }, \"4n\");\n        } else {\n            Tone.Transport.cancel();\n        }\n    }\n    // State\n    getState() {\n        var _Tone_Transport, _this_recorder;\n        return {\n            isPlaying: this.initialized && ((_Tone_Transport = Tone.Transport) === null || _Tone_Transport === void 0 ? void 0 : _Tone_Transport.state) === \"started\",\n            isRecording: ((_this_recorder = this.recorder) === null || _this_recorder === void 0 ? void 0 : _this_recorder.state) === \"started\" || false,\n            bpm: this.initialized ? this.getBPM() : 120,\n            position: this.initialized ? this.getPosition() : \"0:0:0\",\n            tracks: this.getAllTracks()\n        };\n    }\n    // Cleanup\n    dispose() {\n        var _this_recorder, _this_metronome;\n        this.tracks.forEach((track)=>{\n            var _track_instrument;\n            (_track_instrument = track.instrument) === null || _track_instrument === void 0 ? void 0 : _track_instrument.dispose();\n            track.channel.dispose();\n            track.effects.forEach((effect)=>effect.dispose());\n        });\n        this.tracks.clear();\n        (_this_recorder = this.recorder) === null || _this_recorder === void 0 ? void 0 : _this_recorder.dispose();\n        (_this_metronome = this.metronome) === null || _this_metronome === void 0 ? void 0 : _this_metronome.dispose();\n    }\n    constructor(){\n        this.initialized = false;\n        this.tracks = new Map();\n        this.recorder = null;\n        this.metronome = null;\n        this.mainOut = tone__WEBPACK_IMPORTED_MODULE_0__.Destination;\n    }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (AudioEngine);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9hdWRpby9BdWRpb0VuZ2luZS50cyIsIm1hcHBpbmdzIjoiOzs2REFrQmE7QUFxQmIsTUFBTUs7SUFZSixPQUFPQyxjQUEyQjtRQUNoQyxJQUFJLENBQUNELFlBQVlFLFFBQVEsRUFBRTtZQUN6QkYsWUFBWUUsUUFBUSxHQUFHLElBQUlGO1FBQzdCO1FBQ0EsT0FBT0EsWUFBWUUsUUFBUTtJQUM3QjtJQUVBLE1BQU1DLGFBQWE7UUFDakIsSUFBSSxJQUFJLENBQUNDLFdBQVcsRUFBRTtRQUV0QixJQUFJO1lBQ0YsTUFBTVAsMkNBQUtBO1lBQ1hRLFFBQVFDLEdBQUcsQ0FBQztZQUVaLGtCQUFrQjtZQUNsQlgscURBQW1CLEdBQUc7WUFFdEIsbUJBQW1CO1lBQ25CLElBQUksQ0FBQ2MsU0FBUyxHQUFHLElBQUlYLHdDQUFNQSxDQUFDO2dCQUMxQlksS0FBSztnQkFDTEMsTUFBTTtZQUNSLEdBQUdDLGFBQWE7WUFFaEIsSUFBSSxDQUFDUixXQUFXLEdBQUc7UUFDckIsRUFBRSxPQUFPUyxPQUFPO1lBQ2RSLFFBQVFRLEtBQUssQ0FBQywrQkFBK0JBO1FBQy9DO0lBQ0Y7SUFFQSxxQkFBcUI7SUFDckIsTUFBTUMsT0FBTztRQUNYLE1BQU0sSUFBSSxDQUFDWCxVQUFVO1FBQ3JCLElBQUlSLDJDQUFTQSxFQUFFO1lBQ2JBLGlEQUFlO1FBQ2pCO1FBQ0EsT0FBTztJQUNUO0lBRUFvQixRQUFRO1FBQ04sSUFBSSxJQUFJLENBQUNYLFdBQVcsSUFBSVQsMkNBQVNBLEVBQUU7WUFDakNBLGlEQUFlO1FBQ2pCO0lBQ0Y7SUFFQXFCLE9BQU87UUFDTCxJQUFJLElBQUksQ0FBQ1osV0FBVyxJQUFJVCwyQ0FBU0EsRUFBRTtZQUNqQ0EsZ0RBQWM7WUFDZEEsb0RBQWtCLEdBQUc7UUFDdkI7SUFDRjtJQUVBLE1BQU11QixpQkFBaUI7UUFDckIsTUFBTSxJQUFJLENBQUNmLFVBQVU7UUFDckIsSUFBSSxDQUFDLElBQUksQ0FBQ2dCLFFB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NkI7WUFFTTdELGlCQUNsQjtRQUZmLE9BQU87WUFDTDhELFdBQVcsSUFBSSxDQUFDN0YsV0FBVyxJQUFJK0IsRUFBQUEsa0JBQUFBLEtBQUt4QyxTQUFTLGNBQWR3QyxzQ0FBQUEsZ0JBQWdCK0QsS0FBSyxNQUFLO1lBQ3pEQyxhQUFhLHVCQUFJLENBQUNoRixRQUFRLGNBQWIsb0RBQWUrRSxLQUFLLE1BQUssYUFBYTtZQUNuRDNGLEtBQUssSUFBSSxDQUFDSCxXQUFXLEdBQUcsSUFBSSxDQUFDaUYsTUFBTSxLQUFLO1lBQ3hDcEUsVUFBVSxJQUFJLENBQUNiLFdBQVcsR0FBRyxJQUFJLENBQUNrRixXQUFXLEtBQUs7WUFDbER4QyxRQUFRLElBQUksQ0FBQ0ksWUFBWTtRQUMzQjtJQUNGO0lBRUEsVUFBVTtJQUNWSyxVQUFVO1lBT1IsZ0JBQ0E7UUFQQSxJQUFJLENBQUNULE1BQU0sQ0FBQ1UsT0FBTyxDQUFDZixDQUFBQTtnQkFDbEJBO2FBQUFBLG9CQUFBQSxNQUFNUCxVQUFVLGNBQWhCTyx3Q0FBQUEsa0JBQWtCYyxPQUFPO1lBQ3pCZCxNQUFNRixPQUFPLENBQUNnQixPQUFPO1lBQ3JCZCxNQUFNSSxPQUFPLENBQUNXLE9BQU8sQ0FBQ0MsQ0FBQUEsU0FBVUEsT0FBT0YsT0FBTztRQUNoRDtRQUNBLElBQUksQ0FBQ1QsTUFBTSxDQUFDc0QsS0FBSztTQUNqQixxQkFBSSxDQUFDakYsUUFBUSxjQUFiLG9EQUFlb0MsT0FBTztTQUN0QixzQkFBSSxDQUFDOUMsU0FBUyxjQUFkLHNEQUFnQjhDLE9BQU87SUFDekI7SUE5UkE4QyxhQUFjO2FBTk5qRyxjQUFjO2FBQ2QwQyxTQUE2QixJQUFJd0Q7YUFFakNuRixXQUE0QjthQUM1QlYsWUFBMkI7UUFHakMsSUFBSSxDQUFDVyxPQUFPLEdBQUd4Qiw2Q0FBV0E7SUFDNUI7QUE2UkY7QUFFQSwrREFBZUksV0FBV0EsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9saWIvYXVkaW8vQXVkaW9FbmdpbmUudHM/ZWE4YyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgXG4gIFRyYW5zcG9ydCwgXG4gIERlc3RpbmF0aW9uLCBcbiAgc3RhcnQsIFxuICBQbGF5ZXIsIFxuICBQb2x5U3ludGgsIFxuICBTeW50aCwgXG4gIE1lbWJyYW5lU3ludGgsIFxuICBDaGFubmVsLCBcbiAgUmVjb3JkZXIsIFxuICBSZXZlcmIsIFxuICBGZWVkYmFja0RlbGF5LCBcbiAgRGlzdG9ydGlvbiwgXG4gIEZpbHRlcixcbiAgSW5zdHJ1bWVudCxcbiAgRWZmZWN0XG59IGZyb20gJ3RvbmUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhY2sge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICB2b2x1bWU6IG51bWJlclxuICBtdXRlZDogYm9vbGVhblxuICBzb2xvOiBib29sZWFuXG4gIGluc3RydW1lbnQ6IEluc3RydW1lbnQgfCBudWxsXG4gIGVmZmVjdHM6IEVmZmVjdFtdXG4gIGNoYW5uZWw6IENoYW5uZWxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb0VuZ2luZVN0YXRlIHtcbiAgaXNQbGF5aW5nOiBib29sZWFuXG4gIGlzUmVjb3JkaW5nOiBib29sZWFuXG4gIGJwbTogbnVtYmVyXG4gIHBvc2l0aW9uOiBzdHJpbmdcbiAgdHJhY2tzOiBUcmFja1tdXG59XG5cbmNsYXNzIEF1ZGlvRW5naW5lIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEF1ZGlvRW5naW5lXG4gIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBmYWxzZVxuICBwcml2YXRlIHRyYWNrczogTWFwPHN0cmluZywgVHJhY2s+ID0gbmV3IE1hcCgpXG4gIHByaXZhdGUgbWFpbk91dDogdHlwZW9mIERlc3RpbmF0aW9uXG4gIHByaXZhdGUgcmVjb3JkZXI6IFJlY29yZGVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBtZXRyb25vbWU6IFBsYXllciB8IG51bGwgPSBudWxsXG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1haW5PdXQgPSBEZXN0aW5hdGlvblxuICB9XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IEF1ZGlvRW5naW5lIHtcbiAgICBpZiAoIUF1ZGlvRW5naW5lLmluc3RhbmNlKSB7XG4gICAgICBBdWRpb0VuZ2luZS5pbnN0YW5jZSA9IG5ldyBBdWRpb0VuZ2luZSgpXG4gICAgfVxuICAgIHJldHVybiBBdWRpb0VuZ2luZS5pbnN0YW5jZVxuICB9XG5cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCkgcmV0dXJuXG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgc3RhcnQoKVxuICAgICAgY29uc29sZS5sb2coJ0F1ZGlvIGNvbnRleHQgc3RhcnRlZCcpXG4gICAgICBcbiAgICAgIC8vIFNldCBpbml0aWFsIEJQTVxuICAgICAgVHJhbnNwb3J0LmJwbS52YWx1ZSA9IDEyMFxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgbWV0cm9ub21lXG4gICAgICB0aGlzLm1ldHJvbm9tZSA9IG5ldyBQbGF5ZXIoe1xuICAgICAgICB1cmw6ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1Jub0dBQUJYUVZaRlptMTBJQkFBQUFBQkFBRUFRQjhBQUVBZkFBQUJBQWdBWkdGMFlRb0dBQUNCaFlxRmJGMWZkSml2ckpCaE5qVmdvZERicTJFY0JqK2EyL0xEY2lVRkxJSE84dGlKTndnWmFMdnQ1NTlORUF4UXArUHd0bU1jQmppUjEvTE1lU3dGSkhmSDhOMlFRQW9VWHJUcDY2aFZGQXBHbitEeXZtd2hDRWROZWdBJyxcbiAgICAgICAgbG9vcDogZmFsc2VcbiAgICAgIH0pLnRvRGVzdGluYXRpb24oKVxuXG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBhdWRpbzonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvLyBUcmFuc3BvcnQgQ29udHJvbHNcbiAgYXN5bmMgcGxheSgpIHtcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKVxuICAgIGlmIChUcmFuc3BvcnQpIHtcbiAgICAgIFRyYW5zcG9ydC5zdGFydCgpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBwYXVzZSgpIHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCAmJiBUcmFuc3BvcnQpIHtcbiAgICAgIFRyYW5zcG9ydC5wYXVzZSgpXG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCAmJiBUcmFuc3BvcnQpIHtcbiAgICAgIFRyYW5zcG9ydC5zdG9wKClcbiAgICAgIFRyYW5zcG9ydC5wb3NpdGlvbiA9IDBcbiAgICB9XG4gIH1cblxuICBhc3luYyBzdGFydFJlY29yZGluZygpIHtcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKVxuICAgIGlmICghdGhpcy5yZWNvcmRlcikge1xuICAgICAgdGhpcy5yZWNvcmRlciA9IG5ldyBSZWNvcmRlcigpXG4gICAgICB0aGlzLm1haW5PdXQuY29ubmVjdCh0aGlzLnJlY29yZGVyKVxuICAgIH1cbiAgICB0aGlzLnJlY29yZGVyLnN0YXJ0KClcbiAgICB0aGlzLnBsYXkoKVxuICB9XG5cbiAgYXN5bmMgc3RvcFJlY29yZGluZygpOiBQcm9taXNlPEJsb2IgfCBudWxsPiB7XG4gICAgaWYgKCF0aGlzLnJlY29yZGVyKSByZXR1cm4gbnVsbFxuICAgIFxuICAgIGNvbnN0IHJlY29yZGluZyA9IGF3YWl0IHRoaXMucmVjb3JkZXIuc3RvcCgpXG4gICAgdGhpcy5zdG9wKClcbiAgICByZXR1cm4gcmVjb3JkaW5nXG4gIH1cblxuICAvLyBUcmFjayBNYW5hZ2VtZW50XG4gIGNyZWF0ZVRyYWNrKG5hbWU6IHN0cmluZywgdHlwZTogJ2F1ZGlvJyB8ICdtaWRpJyB8ICdkcnVtJyA9ICdhdWRpbycpOiBzdHJpbmcge1xuICAgIGNvbnN0IGlkID0gYHRyYWNrXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxuICAgIFxuICAgIGxldCBpbnN0cnVtZW50OiBUb25lLkluc3RydW1lbnRcbiAgICBcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ21pZGknOlxuICAgICAgICBpbnN0cnVtZW50ID0gbmV3IFRvbmUuUG9seVN5bnRoKFRvbmUuU3ludGgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkcnVtJzpcbiAgICAgICAgaW5zdHJ1bWVudCA9IG5ldyBUb25lLk1lbWJyYW5lU3ludGgoKVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaW5zdHJ1bWVudCA9IG5ldyBUb25lLlBsYXllcigpLnRvRGVzdGluYXRpb24oKVxuICAgIH1cblxuICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgVG9uZS5DaGFubmVsKCkudG9EZXN0aW5hdGlvbigpXG4gICAgaW5zdHJ1bWVudC5jb25uZWN0KGNoYW5uZWwpXG5cbiAgICBjb25zdCB0cmFjazogVHJhY2sgPSB7XG4gICAgICBpZCxcbiAgICAgIG5hbWUsXG4gICAgICB2b2x1bWU6IDAsIC8vIDAgZEJcbiAgICAgIG11dGVkOiBmYWxzZSxcbiAgICAgIHNvbG86IGZhbHNlLFxuICAgICAgaW5zdHJ1bWVudCxcbiAgICAgIGVmZmVjdHM6IFtdLFxuICAgICAgY2hhbm5lbFxuICAgIH1cblxuICAgIHRoaXMudHJhY2tzLnNldChpZCwgdHJhY2spXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBnZXRUcmFjayhpZDogc3RyaW5nKTogVHJhY2sgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnRyYWNrcy5nZXQoaWQpXG4gIH1cblxuICBnZXRBbGxUcmFja3MoKTogVHJhY2tbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy50cmFja3MudmFsdWVzKCkpXG4gIH1cblxuICBkZWxldGVUcmFjayhpZDogc3RyaW5nKSB7XG4gICAgY29uc3QgdHJhY2sgPSB0aGlzLnRyYWNrcy5nZXQoaWQpXG4gICAgaWYgKHRyYWNrKSB7XG4gICAgICB0cmFjay5pbnN0cnVtZW50Py5kaXNwb3NlKClcbiAgICAgIHRyYWNrLmNoYW5uZWwuZGlzcG9zZSgpXG4gICAgICB0cmFjay5lZmZlY3RzLmZvckVhY2goZWZmZWN0ID0+IGVmZmVjdC5kaXNwb3NlKCkpXG4gICAgICB0aGlzLnRyYWNrcy5kZWxldGUoaWQpXG4gICAgfVxuICB9XG5cbiAgLy8gVHJhY2sgQ29udHJvbHNcbiAgc2V0VHJhY2tWb2x1bWUodHJhY2tJZDogc3RyaW5nLCB2b2x1bWU6IG51bWJlcikge1xuICAgIGNvbnN0IHRyYWNrID0gdGhpcy50cmFja3MuZ2V0KHRyYWNrSWQpXG4gICAgaWYgKHRyYWNrKSB7XG4gICAgICB0cmFjay52b2x1bWUgPSB2b2x1bWVcbiAgICAgIHRyYWNrLmNoYW5uZWwudm9sdW1lLnZhbHVlID0gdm9sdW1lXG4gICAgfVxuICB9XG5cbiAgc2V0VHJhY2tNdXRlKHRyYWNrSWQ6IHN0cmluZywgbXV0ZWQ6IGJvb2xlYW4pIHtcbiAgICBjb25zdCB0cmFjayA9IHRoaXMudHJhY2tzLmdldCh0cmFja0lkKVxuICAgIGlmICh0cmFjaykge1xuICAgICAgdHJhY2subXV0ZWQgPSBtdXRlZFxuICAgICAgdHJhY2suY2hhbm5lbC5tdXRlID0gbXV0ZWRcbiAgICB9XG4gIH1cblxuICBzZXRUcmFja1NvbG8odHJhY2tJZDogc3RyaW5nLCBzb2xvOiBib29sZWFuKSB7XG4gICAgY29uc3QgdHJhY2sgPSB0aGlzLnRyYWNrcy5nZXQodHJhY2tJZClcbiAgICBpZiAodHJhY2spIHtcbiAgICAgIHRyYWNrLnNvbG8gPSBzb2xvXG4gICAgICAvLyBJbXBsZW1lbnQgc29sbyBsb2dpYyAtIG11dGUgb3RoZXIgdHJhY2tzIHdoZW4gb25lIGlzIHNvbG9lZFxuICAgICAgY29uc3QgaGFzU29sb1RyYWNrcyA9IEFycmF5LmZyb20odGhpcy50cmFja3MudmFsdWVzKCkpLnNvbWUodCA9PiB0LnNvbG8pXG4gICAgICBcbiAgICAgIHRoaXMudHJhY2tzLmZvckVhY2godCA9PiB7XG4gICAgICAgIGlmIChoYXNTb2xvVHJhY2tzKSB7XG4gICAgICAgICAgdC5jaGFubmVsLm11dGUgPSAhdC5zb2xvXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdC5jaGFubmVsLm11dGUgPSB0Lm11dGVkXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gQXVkaW8gTG9hZGluZ1xuICBhc3luYyBsb2FkQXVkaW9Ub1RyYWNrKHRyYWNrSWQ6IHN0cmluZywgYXVkaW9Vcmw6IHN0cmluZykge1xuICAgIGNvbnN0IHRyYWNrID0gdGhpcy50cmFja3MuZ2V0KHRyYWNrSWQpXG4gICAgaWYgKHRyYWNrICYmIHRyYWNrLmluc3RydW1lbnQgaW5zdGFuY2VvZiBUb25lLlBsYXllcikge1xuICAgICAgYXdhaXQgdHJhY2suaW5zdHJ1bWVudC5sb2FkKGF1ZGlvVXJsKVxuICAgIH1cbiAgfVxuXG4gIC8vIE1JREkgUGxheWJhY2tcbiAgcGxheU5vdGUodHJhY2tJZDogc3RyaW5nLCBub3RlOiBzdHJpbmcsIGR1cmF0aW9uOiBzdHJpbmcgPSAnOG4nLCB0aW1lPzogbnVtYmVyKSB7XG4gICAgY29uc3QgdHJhY2sgPSB0aGlzLnRyYWNrcy5nZXQodHJhY2tJZClcbiAgICBpZiAodHJhY2sgJiYgdHJhY2suaW5zdHJ1bWVudCkge1xuICAgICAgaWYgKHRyYWNrLmluc3RydW1lbnQgaW5zdGFuY2VvZiBUb25lLlBvbHlTeW50aCkge1xuICAgICAgICB0cmFjay5pbnN0cnVtZW50LnRyaWdnZXJBdHRhY2tSZWxlYXNlKG5vdGUsIGR1cmF0aW9uLCB0aW1lKVxuICAgICAgfSBlbHNlIGlmICh0cmFjay5pbnN0cnVtZW50IGluc3RhbmNlb2YgVG9uZS5NZW1icmFuZVN5bnRoKSB7XG4gICAgICAgIHRyYWNrLmluc3RydW1lbnQudHJpZ2dlckF0dGFja1JlbGVhc2Uobm90ZSwgZHVyYXRpb24sIHRpbWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRWZmZWN0c1xuICBhZGRFZmZlY3QodHJhY2tJZDogc3RyaW5nLCBlZmZlY3RUeXBlOiAncmV2ZXJiJyB8ICdkZWxheScgfCAnZGlzdG9ydGlvbicgfCAnZmlsdGVyJykge1xuICAgIGNvbnN0IHRyYWNrID0gdGhpcy50cmFja3MuZ2V0KHRyYWNrSWQpXG4gICAgaWYgKCF0cmFjaykgcmV0dXJuXG5cbiAgICBsZXQgZWZmZWN0OiBUb25lLkVmZmVjdFxuXG4gICAgc3dpdGNoIChlZmZlY3RUeXBlKSB7XG4gICAgICBjYXNlICdyZXZlcmInOlxuICAgICAgICBlZmZlY3QgPSBuZXcgVG9uZS5SZXZlcmIoMilcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2RlbGF5JzpcbiAgICAgICAgZWZmZWN0ID0gbmV3IFRvbmUuRmVlZGJhY2tEZWxheSgnOG4nLCAwLjMpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkaXN0b3J0aW9uJzpcbiAgICAgICAgZWZmZWN0ID0gbmV3IFRvbmUuRGlzdG9ydGlvbigwLjgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdmaWx0ZXInOlxuICAgICAgICBlZmZlY3QgPSBuZXcgVG9uZS5GaWx0ZXIoMTAwMCwgJ2xvd3Bhc3MnKVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gSW5zZXJ0IGVmZmVjdCBiZWZvcmUgdGhlIGNoYW5uZWxcbiAgICB0cmFjay5pbnN0cnVtZW50Py5kaXNjb25uZWN0KClcbiAgICB0cmFjay5pbnN0cnVtZW50Py5jaGFpbihlZmZlY3QsIHRyYWNrLmNoYW5uZWwpXG4gICAgdHJhY2suZWZmZWN0cy5wdXNoKGVmZmVjdClcbiAgfVxuXG4gIC8vIFRyYW5zcG9ydCBDb250cm9sXG4gIHNldEJQTShicG06IG51bWJlcikge1xuICAgIGlmICh0aGlzLmluaXRpYWxpemVkICYmIFRvbmUuVHJhbnNwb3J0KSB7XG4gICAgICBUb25lLlRyYW5zcG9ydC5icG0udmFsdWUgPSBicG1cbiAgICB9XG4gIH1cblxuICBnZXRCUE0oKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCAmJiBUb25lLlRyYW5zcG9ydCkge1xuICAgICAgcmV0dXJuIFRvbmUuVHJhbnNwb3J0LmJwbS52YWx1ZVxuICAgIH1cbiAgICByZXR1cm4gMTIwXG4gIH1cblxuICBnZXRQb3NpdGlvbigpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmluaXRpYWxpemVkICYmIFRvbmUuVHJhbnNwb3J0KSB7XG4gICAgICByZXR1cm4gVG9uZS5UcmFuc3BvcnQucG9zaXRpb24udG9TdHJpbmcoKVxuICAgIH1cbiAgICByZXR1cm4gJzA6MDowJ1xuICB9XG5cbiAgc2V0UG9zaXRpb24ocG9zaXRpb246IHN0cmluZykge1xuICAgIGlmICh0aGlzLmluaXRpYWxpemVkICYmIFRvbmUuVHJhbnNwb3J0KSB7XG4gICAgICBUb25lLlRyYW5zcG9ydC5wb3NpdGlvbiA9IHBvc2l0aW9uXG4gICAgfVxuICB9XG5cbiAgLy8gTG9vcCBDb250cm9sXG4gIHNldExvb3Aoc3RhcnQ6IHN0cmluZywgZW5kOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCAmJiBUb25lLlRyYW5zcG9ydCkge1xuICAgICAgVG9uZS5UcmFuc3BvcnQuc2V0TG9vcFBvaW50cyhzdGFydCwgZW5kKVxuICAgICAgVG9uZS5UcmFuc3BvcnQubG9vcCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlTG9vcCgpIHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCAmJiBUb25lLlRyYW5zcG9ydCkge1xuICAgICAgVG9uZS5UcmFuc3BvcnQubG9vcCA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8gTWV0cm9ub21lXG4gIHRvZ2dsZU1ldHJvbm9tZShlbmFibGVkOiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLm1ldHJvbm9tZSB8fCAhdGhpcy5pbml0aWFsaXplZCB8fCAhVG9uZS5UcmFuc3BvcnQpIHJldHVyblxuXG4gICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgIC8vIFNjaGVkdWxlIG1ldHJvbm9tZSBjbGlja3Mgb24gZXZlcnkgYmVhdFxuICAgICAgVG9uZS5UcmFuc3BvcnQuc2NoZWR1bGVSZXBlYXQoKHRpbWUpID0+IHtcbiAgICAgICAgdGhpcy5tZXRyb25vbWU/LnN0YXJ0KHRpbWUpXG4gICAgICB9LCAnNG4nKVxuICAgIH0gZWxzZSB7XG4gICAgICBUb25lLlRyYW5zcG9ydC5jYW5jZWwoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFN0YXRlXG4gIGdldFN0YXRlKCk6IEF1ZGlvRW5naW5lU3RhdGUge1xuICAgIHJldHVybiB7XG4gICAgICBpc1BsYXlpbmc6IHRoaXMuaW5pdGlhbGl6ZWQgJiYgVG9uZS5UcmFuc3BvcnQ/LnN0YXRlID09PSAnc3RhcnRlZCcsXG4gICAgICBpc1JlY29yZGluZzogdGhpcy5yZWNvcmRlcj8uc3RhdGUgPT09ICdzdGFydGVkJyB8fCBmYWxzZSxcbiAgICAgIGJwbTogdGhpcy5pbml0aWFsaXplZCA/IHRoaXMuZ2V0QlBNKCkgOiAxMjAsXG4gICAgICBwb3NpdGlvbjogdGhpcy5pbml0aWFsaXplZCA/IHRoaXMuZ2V0UG9zaXRpb24oKSA6ICcwOjA6MCcsXG4gICAgICB0cmFja3M6IHRoaXMuZ2V0QWxsVHJhY2tzKClcbiAgICB9XG4gIH1cblxuICAvLyBDbGVhbnVwXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy50cmFja3MuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICB0cmFjay5pbnN0cnVtZW50Py5kaXNwb3NlKClcbiAgICAgIHRyYWNrLmNoYW5uZWwuZGlzcG9zZSgpXG4gICAgICB0cmFjay5lZmZlY3RzLmZvckVhY2goZWZmZWN0ID0+IGVmZmVjdC5kaXNwb3NlKCkpXG4gICAgfSlcbiAgICB0aGlzLnRyYWNrcy5jbGVhcigpXG4gICAgdGhpcy5yZWNvcmRlcj8uZGlzcG9zZSgpXG4gICAgdGhpcy5tZXRyb25vbWU/LmRpc3Bvc2UoKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1ZGlvRW5naW5lIl0sIm5hbWVzIjpbIlRyYW5zcG9ydCIsIkRlc3RpbmF0aW9uIiwic3RhcnQiLCJQbGF5ZXIiLCJSZWNvcmRlciIsIkF1ZGlvRW5naW5lIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImluaXRpYWxpemUiLCJpbml0aWFsaXplZCIsImNvbnNvbGUiLCJsb2ciLCJicG0iLCJ2YWx1ZSIsIm1ldHJvbm9tZSIsInVybCIsImxvb3AiLCJ0b0Rlc3RpbmF0aW9uIiwiZXJyb3IiLCJwbGF5IiwicGF1c2UiLCJzdG9wIiwicG9zaXRpb24iLCJzdGFydFJlY29yZGluZyIsInJlY29yZGVyIiwibWFpbk91dCIsImNvbm5lY3QiLCJzdG9wUmVjb3JkaW5nIiwicmVjb3JkaW5nIiwiY3JlYXRlVHJhY2siLCJuYW1lIiwidHlwZSIsImlkIiwiTWF0aCIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsImluc3RydW1lbnQiLCJUb25lIiwiUG9seVN5bnRoIiwiU3ludGgiLCJNZW1icmFuZVN5bnRoIiwiY2hhbm5lbCIsIkNoYW5uZWwiLCJ0cmFjayIsInZvbHVtZSIsIm11dGVkIiwic29sbyIsImVmZmVjdHMiLCJ0cmFja3MiLCJzZXQiLCJnZXRUcmFjayIsImdldCIsImdldEFsbFRyYWNrcyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImRlbGV0ZVRyYWNrIiwiZGlzcG9zZSIsImZvckVhY2giLCJlZmZlY3QiLCJkZWxldGUiLCJzZXRUcmFja1ZvbHVtZSIsInRyYWNrSWQiLCJzZXRUcmFja011dGUiLCJtdXRlIiwic2V0VHJhY2tTb2xvIiwiaGFzU29sb1RyYWNrcyIsInNvbWUiLCJ0IiwibG9hZEF1ZGlvVG9UcmFjayIsImF1ZGlvVXJsIiwibG9hZCIsInBsYXlOb3RlIiwibm90ZSIsImR1cmF0aW9uIiwidGltZSIsInRyaWdnZXJBdHRhY2tSZWxlYXNlIiwiYWRkRWZmZWN0IiwiZWZmZWN0VHlwZSIsIlJldmVyYiIsIkZlZWRiYWNrRGVsYXkiLCJEaXN0b3J0aW9uIiwiRmlsdGVyIiwiZGlzY29ubmVjdCIsImNoYWluIiwicHVzaCIsInNldEJQTSIsImdldEJQTSIsImdldFBvc2l0aW9uIiwic2V0UG9zaXRpb24iLCJzZXRMb29wIiwiZW5kIiwic2V0TG9vcFBvaW50cyIsImRpc2FibGVMb29wIiwidG9nZ2xlTWV0cm9ub21lIiwiZW5hYmxlZCIsInNjaGVkdWxlUmVwZWF0IiwiY2FuY2VsIiwiZ2V0U3RhdGUiLCJpc1BsYXlpbmciLCJzdGF0ZSIsImlzUmVjb3JkaW5nIiwiY2xlYXIiLCJjb25zdHJ1Y3RvciIsIk1hcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/audio/AudioEngine.ts\n"));

/***/ })

});