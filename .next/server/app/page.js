(()=>{var e={};e.id=931,e.ids=[931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},84866:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>f,tree:()=>d});var a=r(67096),s=r(16132),n=r(37284),i=r.n(n),o=r(32564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,83982)),"/Users/b0ase/Projects/bitcoin-music/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,49927)),"/Users/b0ase/Projects/bitcoin-music/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/b0ase/Projects/bitcoin-music/app/page.tsx"],p="/page",x={require:r,loadChunk:()=>Promise.resolve()},f=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},20515:(e,t,r)=>{Promise.resolve().then(r.bind(r,57292))},57292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>HomePage});var a=r(30784),s=r(9885),n=r(74284),i=r(99131),o=r(49384),l=r(24989),d=r(72568),c=r(54667),p=r(38891),x=r(99452),f=r(88078),g=r(50580),u=r(19917),b=r(98401),h=r(53835),y=r(8965),m=r(6426),j=r(29769),v=r(36595),k=r(94834),w=r(32822);function MusicSidebar({currentView:e,onViewChange:t,onAuthRequired:r}){let{data:S}=(0,n.useSession)(),[C,T]=(0,s.useState)(["studio","library"]),[z,M]=(0,s.useState)(""),[R,I]=(0,s.useState)(0),[B]=(0,s.useState)(10737418240);(0,s.useEffect)(()=>{let e=localStorage.getItem("musicProjects");if(e){let t=new Blob([e]).size;I(t)}},[]);let toggleSection=e=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},formatBytes=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},A=[{icon:a.jsx(i.Z,{size:16}),label:"All Projects",count:12},{icon:a.jsx(o.Z,{size:16}),label:"Recent",count:5},{icon:a.jsx(l.Z,{size:16}),label:"Recordings",count:8},{icon:a.jsx(d.Z,{size:16}),label:"Tracks",count:24},{icon:a.jsx(c.Z,{size:16}),label:"Samples",count:156},{icon:a.jsx(p.Z,{size:16}),label:"NFT Masters",count:3}],N=[{icon:a.jsx(d.Z,{size:16}),label:"My Music",count:89},{icon:a.jsx(p.Z,{size:16}),label:"Favorites",count:23},{icon:a.jsx(o.Z,{size:16}),label:"Recently Added",count:15},{icon:a.jsx(x.Z,{size:16}),label:"Shared with Me",count:7}],P=[{id:"studio",icon:a.jsx(d.Z,{size:18}),label:"Studio"},{id:"marketplace",icon:a.jsx(f.Z,{size:18}),label:"Marketplace"},{id:"library",icon:a.jsx(g.Z,{size:18}),label:"Library"},{id:"exchange",icon:a.jsx(u.Z,{size:18}),label:"Exchange"}];return(0,a.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",color:"#ffffff",fontSize:"13px"},children:[S?a.jsx("div",{style:{padding:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(b.Z,{size:20})}),(0,a.jsxs)("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"2px"},children:S.user?.name||S.user?.email?.split("@")[0]||"Producer"}),a.jsx("div",{style:{fontSize:"11px",opacity:.6},children:"Free Plan"})]}),a.jsx("button",{onClick:()=>console.log("Settings"),style:{padding:"4px",background:"transparent",border:"none",color:"#ffffff",cursor:"pointer",opacity:.6,transition:"opacity 0.2s"},onMouseEnter:e=>e.currentTarget.style.opacity="1",onMouseLeave:e=>e.currentTarget.style.opacity="0.6",children:a.jsx(h.Z,{size:16})})]})}):a.jsx("div",{style:{padding:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:a.jsx("button",{onClick:r,style:{width:"100%",padding:"10px",background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",border:"none",borderRadius:"6px",color:"#ffffff",fontWeight:"600",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.02)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:"Sign In to Continue"})}),a.jsx("div",{style:{padding:"12px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:P.map(r=>(0,a.jsxs)("button",{onClick:()=>t(r.id),style:{padding:"8px",background:e===r.id?"rgba(139, 92, 246, 0.2)":"transparent",border:e===r.id?"1px solid rgba(139, 92, 246, 0.5)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:e===r.id?"#8b5cf6":"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontSize:"12px",fontWeight:e===r.id?"600":"400",transition:"all 0.2s"},onMouseEnter:t=>{e!==r.id&&(t.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},onMouseLeave:t=>{e!==r.id&&(t.currentTarget.style.background="transparent")},children:[r.icon,a.jsx("span",{children:r.label})]},r.id))}),(0,a.jsxs)("div",{style:{padding:"12px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",gap:"8px"},children:[(0,a.jsxs)("button",{onClick:()=>console.log("New project"),style:{flex:1,padding:"8px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"6px",color:"#8b5cf6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontSize:"12px",fontWeight:"500",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(139, 92, 246, 0.2)",e.currentTarget.style.borderColor="rgba(139, 92, 246, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(139, 92, 246, 0.1)",e.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},children:[a.jsx(y.Z,{size:16}),a.jsx("span",{children:"New Project"})]}),a.jsx("button",{onClick:()=>document.getElementById("audio-upload")?.click(),style:{padding:"8px 12px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)"},children:a.jsx(m.Z,{size:16})})]}),a.jsx("div",{style:{padding:"12px"},children:(0,a.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[a.jsx(j.Z,{size:16,style:{position:"absolute",left:"10px",opacity:.5}}),a.jsx("input",{type:"text",placeholder:"Search projects...",value:z,onChange:e=>M(e.target.value),style:{width:"100%",padding:"8px 8px 8px 32px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#ffffff",fontSize:"12px",outline:"none",transition:"all 0.2s"},onFocus:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.08)",e.currentTarget.style.borderColor="rgba(139, 92, 246, 0.5)"},onBlur:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)"}})]})}),(0,a.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"0 12px"},children:[("studio"===e||"library"===e)&&(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsxs)("button",{onClick:()=>toggleSection("studio"),style:{width:"100%",padding:"8px 0",background:"transparent",border:"none",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",opacity:.7},children:[C.includes("studio")?a.jsx(v.Z,{size:12}):a.jsx(k.Z,{size:12}),"Studio Projects"]}),C.includes("studio")&&a.jsx("div",{style:{marginTop:"8px"},children:A.map((e,t)=>(0,a.jsxs)("button",{style:{width:"100%",padding:"6px 8px",background:"transparent",border:"none",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"12px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.icon,a.jsx("span",{children:e.label})]}),a.jsx("span",{style:{opacity:.5,fontSize:"11px"},children:e.count})]},t))})]}),"library"===e&&(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsxs)("button",{onClick:()=>toggleSection("library"),style:{width:"100%",padding:"8px 0",background:"transparent",border:"none",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",opacity:.7},children:[C.includes("library")?a.jsx(v.Z,{size:12}):a.jsx(k.Z,{size:12}),"Music Library"]}),C.includes("library")&&a.jsx("div",{style:{marginTop:"8px"},children:N.map((e,t)=>(0,a.jsxs)("button",{style:{width:"100%",padding:"6px 8px",background:"transparent",border:"none",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"12px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.icon,a.jsx("span",{children:e.label})]}),a.jsx("span",{style:{opacity:.5,fontSize:"11px"},children:e.count})]},t))})]})]}),(0,a.jsxs)("div",{style:{padding:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"11px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx(w.Z,{size:12}),a.jsx("span",{children:"Storage"})]}),(0,a.jsxs)("span",{style:{opacity:.6},children:[formatBytes(R)," / ",formatBytes(B)]})]}),a.jsx("div",{style:{height:"4px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:a.jsx("div",{style:{height:"100%",width:`${R/B*100}%`,background:"linear-gradient(90deg, #8b5cf6 0%, #a855f7 100%)",transition:"width 0.3s"}})})]}),a.jsx("input",{id:"audio-upload",type:"file",accept:"audio/*",style:{display:"none"},onChange:e=>{let t=e.target.files?.[0];t&&console.log("Uploading:",t.name)}})]})}var S=r(23745),C=r.n(S),T=r(25620),z=r(54405),M=r(96215),R=r(53218),I=r(4711),B=r(9646),A=r(71295),N=r(2933),P=r(58823);async function getTone(){return null}async function initializeTone(){let e=await getTone();if(!e)return!1;try{return await e.start(),console.log("Tone.js audio context started"),!0}catch(e){return console.error("Failed to start audio context:",e),!1}}let AudioEngine=class AudioEngine{constructor(){this.initialized=!1,this.tracks=new Map,this.mainOut=null,this.recorder=null,this.metronome=null,this.masterCompressor=null,this.masterLimiter=null,this.mediaRecorder=null,this.recordedChunks=[]}static getInstance(){return AudioEngine.instance||(AudioEngine.instance=new AudioEngine),AudioEngine.instance}async initialize(){if(!this.initialized)try{let e=await initializeTone();if(!e){console.warn("Running without Tone.js audio engine"),this.initialized=!0;return}let t=await getTone();if(!t){this.initialized=!0;return}this.masterCompressor=new t.Compressor(-20,10),this.masterLimiter=new t.Limiter(-3),this.mainOut=t.Destination,this.masterCompressor.connect(this.masterLimiter),this.masterLimiter.connect(this.mainOut),t.Transport.bpm.value=120,this.metronome=new t.Oscillator(800,"sine").toDestination(),this.metronome.volume.value=-10,this.metronome.stop(),this.initialized=!0,console.log("Tone.js audio engine initialized")}catch(e){console.error("Failed to initialize audio:",e),this.initialized=!0}}async play(){await this.initialize();let e=await getTone();return e&&e.Transport&&(await e.Transport.start(),console.log("Transport started")),!0}async pause(){let e=await getTone();e&&e.Transport&&(e.Transport.pause(),console.log("Transport paused"))}async stop(){let e=await getTone();e&&e.Transport&&(e.Transport.stop(),e.Transport.position=0,console.log("Transport stopped"))}async startRecording(){await this.initialize();try{let e=await getTone();if(e&&e.context){let t=e.context.createMediaStreamDestination();this.mainOut.connect(t),this.recordedChunks=[],this.mediaRecorder=new MediaRecorder(t.stream),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.recordedChunks.push(e.data)},this.mediaRecorder.start(),console.log("Recording started")}}catch(e){console.error("Failed to start recording:",e)}this.play()}async stopRecording(){return this.stop(),new Promise(e=>{this.mediaRecorder&&"inactive"!==this.mediaRecorder.state?(this.mediaRecorder.onstop=()=>{let t=new Blob(this.recordedChunks,{type:"audio/wav"});this.recordedChunks=[],console.log("Recording stopped"),e(t)},this.mediaRecorder.stop()):e(null)})}async createTrack(e,t="audio"){let r=`track_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a=null,s=null,n=await getTone();n&&(a=new n.Channel({volume:0,pan:0}),"midi"===t?(s=new n.PolySynth(n.Synth,{oscillator:{type:"sine"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}})).connect(a):"drum"===t&&(s=new n.Sampler({C4:"https://tonejs.github.io/audio/drum-samples/kick.mp3",D4:"https://tonejs.github.io/audio/drum-samples/snare.mp3",E4:"https://tonejs.github.io/audio/drum-samples/hihat-closed.mp3"})).connect(a),this.masterCompressor&&a.connect(this.masterCompressor));let i={id:r,name:e,volume:0,muted:!1,solo:!1,instrument:s,effects:[],channel:a};return this.tracks.set(r,i),console.log(`Created ${t} track "${e}" with id ${r}`),r}getTrack(e){return this.tracks.get(e)}getAllTracks(){return Array.from(this.tracks.values())}deleteTrack(e){let t=this.tracks.get(e);t&&(t.instrument&&t.instrument.dispose&&t.instrument.dispose(),t.channel&&t.channel.dispose&&t.channel.dispose(),t.effects.forEach(e=>{e&&e.dispose&&e.dispose()}),this.tracks.delete(e),console.log(`Deleted track ${e}`))}setTrackVolume(e,t){let r=this.tracks.get(e);r&&(r.volume=t,r.channel&&(r.channel.volume.value=t),console.log(`Set track ${e} volume to ${t}dB`))}setTrackMute(e,t){let r=this.tracks.get(e);r&&(r.muted=t,r.channel&&(r.channel.mute=t),console.log(`${t?"Muted":"Unmuted"} track ${e}`))}setTrackSolo(e,t){let r=this.tracks.get(e);if(r){r.solo=t;let a=Array.from(this.tracks.values()).some(e=>e.solo);this.tracks.forEach(e=>{e.channel&&(a?e.channel.mute=!e.solo:e.channel.mute=e.muted)}),console.log(`${t?"Soloed":"Unsoloed"} track ${e}`)}}async loadAudioToTrack(e,t){let r=this.tracks.get(e),a=await getTone();if(r&&a)try{let s=new a.Player(t);await s.load(),r.channel&&s.connect(r.channel),r.instrument=s,console.log(`Loaded audio to track ${e}`)}catch(t){console.error(`Failed to load audio to track ${e}:`,t)}}async playNote(e,t,r="8n",a){let s=this.tracks.get(e),n=await getTone();if(s&&s.instrument&&n){let i=void 0!==a?a:n.now();s.instrument.triggerAttackRelease?s.instrument.triggerAttackRelease(t,r,i):s.instrument.start&&s.instrument.start(i),console.log(`Playing note ${t} on track ${e}`)}}async addEffect(e,t){let r=this.tracks.get(e),a=await getTone();if(!r||!a)return;let s=null;switch(t){case"reverb":s=new a.Reverb(2);break;case"delay":s=new a.Delay(.25);break;case"distortion":s=new a.Distortion(.4);break;case"filter":s=new a.Filter(350,"lowpass")}s&&r.channel&&this.masterCompressor&&(r.channel.chain(s,this.masterCompressor),r.effects.push(s),console.log(`Added ${t} effect to track ${e}`))}async setBPM(e){let t=await getTone();t&&t.Transport&&(t.Transport.bpm.value=e),console.log(`Set BPM to ${e}`)}async getBPM(){let e=await getTone();return e&&e.Transport?e.Transport.bpm.value:120}async getPosition(){let e=await getTone();return e&&e.Transport?e.Transport.position.toString():"0:0:0"}async setPosition(e){let t=await getTone();t&&t.Transport&&(t.Transport.position=e),console.log(`Set position to ${e}`)}async setLoop(e,t){let r=await getTone();r&&r.Transport&&(r.Transport.loop=!0,r.Transport.loopStart=e,r.Transport.loopEnd=t),console.log(`Set loop from ${e} to ${t}`)}async disableLoop(){let e=await getTone();e&&e.Transport&&(e.Transport.loop=!1),console.log("Disabled loop")}async toggleMetronome(e){let t=await getTone();if(t&&this.metronome){if(e){let e=new t.Loop(e=>{this.metronome.start(e).stop(e+.1)},"4n");e.start(0)}else this.metronome&&this.metronome.stop();console.log(`Metronome ${e?"enabled":"disabled"}`)}}async getState(){let e=await getTone(),t=!!e&&!!e.Transport&&"started"===e.Transport.state,r=!!this.mediaRecorder&&"recording"===this.mediaRecorder.state;return{isPlaying:t,isRecording:r,bpm:await this.getBPM(),position:await this.getPosition(),tracks:this.getAllTracks()}}async dispose(){let e=await getTone();e&&(e.Transport&&(e.Transport.stop(),e.Transport.cancel()),this.tracks.forEach(e=>{e.instrument&&e.instrument.dispose&&e.instrument.dispose(),e.channel&&e.channel.dispose&&e.channel.dispose(),e.effects.forEach(e=>{e&&e.dispose&&e.dispose()})}),this.masterCompressor&&this.masterCompressor.dispose&&this.masterCompressor.dispose(),this.masterLimiter&&this.masterLimiter.dispose&&this.masterLimiter.dispose(),this.metronome&&this.metronome.dispose&&this.metronome.dispose()),this.tracks.clear(),this.initialized=!1,console.log("Audio engine disposed")}};function useAudioEngine(){let[e]=(0,s.useState)(()=>AudioEngine.getInstance()),[t,r]=(0,s.useState)({isPlaying:!1,isRecording:!1,bpm:120,position:"0:0:0",tracks:[]});(0,s.useEffect)(()=>{let a=null;return t.isPlaying&&(a=setInterval(async()=>{let t=await e.getState();r(t)},100)),()=>{a&&clearInterval(a)}},[t.isPlaying,e]),(0,s.useEffect)(()=>{e.getState().then(r)},[e]);let a=(0,s.useCallback)(async()=>{await e.play();let t=await e.getState();r(t)},[e]),n=(0,s.useCallback)(async()=>{await e.pause();let t=await e.getState();r(t)},[e]),i=(0,s.useCallback)(async()=>{await e.stop();let t=await e.getState();r(t)},[e]),o=(0,s.useCallback)(async()=>{await e.startRecording();let t=await e.getState();r(t)},[e]),l=(0,s.useCallback)(async()=>{let t=await e.stopRecording(),a=await e.getState();return r(a),t},[e]),d=(0,s.useCallback)(async t=>{await e.setBPM(t);let a=await e.getState();r(a)},[e]),c=(0,s.useCallback)(async(t,a="audio")=>{let s=await e.createTrack(t,a),n=await e.getState();return r(n),s},[e]),p=(0,s.useCallback)(async(t,a)=>{e.setTrackVolume(t,a);let s=await e.getState();r(s)},[e]),x=(0,s.useCallback)(async(t,a)=>{e.setTrackMute(t,a);let s=await e.getState();r(s)},[e]),f=(0,s.useCallback)(async(t,a)=>{e.setTrackSolo(t,a);let s=await e.getState();r(s)},[e]),g=(0,s.useCallback)(async(t,r,a="8n")=>{await e.playNote(t,r,a)},[e]),u=(0,s.useCallback)(async(t,a)=>{await e.loadAudioToTrack(t,a);let s=await e.getState();r(s)},[e]),b=(0,s.useCallback)(async(t,a)=>{await e.addEffect(t,a);let s=await e.getState();r(s)},[e]),h=(0,s.useCallback)(async t=>{e.deleteTrack(t);let a=await e.getState();r(a)},[e]);return{...t,play:a,pause:n,stop:i,startRecording:o,stopRecording:l,setBPM:d,createTrack:c,deleteTrack:h,setTrackVolume:p,setTrackMute:x,setTrackSolo:f,loadAudioToTrack:u,playNote:g,addEffect:b,audioEngine:e}}var E=r(7819),L=r(91605),Z=r(22654);function WaveformDisplay({trackId:e,height:t=80,isActive:r=!0,audioUrl:n}){let i=(0,s.useRef)(null),o=(0,s.useRef)(null),[l,d]=(0,s.useState)(!1),[c,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!i.current)return;let e=Z.Z.create({container:i.current,waveColor:r?"#8b5cf6":"rgba(139, 92, 246, 0.3)",progressColor:r?"#a855f7":"rgba(168, 85, 247, 0.3)",barWidth:2,barGap:1,height:t-20,normalize:!0,backend:"WebAudio",cursorColor:"#ffffff",cursorWidth:1,interact:!0});return o.current=e,e.on("ready",()=>{d(!0),p(null)}),e.on("error",e=>{console.error("WaveSurfer error:",e),p("Failed to load audio"),d(!1)}),n?e.load(n):generatePlaceholderWaveform(e),()=>{e.destroy()}},[e,n,t]),(0,s.useEffect)(()=>{o.current&&o.current.setOptions({waveColor:r?"#8b5cf6":"rgba(139, 92, 246, 0.3)",progressColor:r?"#a855f7":"rgba(168, 85, 247, 0.3)"})},[r]);let generatePlaceholderWaveform=e=>{let t=new Float32Array(441e3);for(let e=0;e<441e3;e++){let r=e/44100;t[e]=.1*Math.sin(880*r*Math.PI)*(.5*Math.random()+.5)}let r=new(window.AudioContext||window.webkitAudioContext),a=r.createBuffer(1,441e3,44100);a.getChannelData(0).set(t),e.loadDecodedBuffer?.(a)};return c?a.jsx("div",{style:{width:"100%",height:`${t}px`,display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(239, 68, 68, 0.7)",fontSize:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px dashed rgba(239, 68, 68, 0.3)"},children:c}):(0,a.jsxs)("div",{style:{width:"100%",height:`${t}px`,position:"relative",cursor:"pointer",display:"flex",alignItems:"center",padding:"10px"},children:[!l&&a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)",color:"rgba(255, 255, 255, 0.5)",fontSize:"12px",zIndex:10},children:n?"Loading audio...":"Drop audio file or click to upload"}),a.jsx("div",{ref:i,onClick:e=>{if(o.current&&l){let t=i.current?.getBoundingClientRect();if(t){let r=e.clientX-t.left,a=r/t.width;o.current.seekTo(a)}}},style:{width:"100%",height:"100%"}}),a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",background:`repeating-linear-gradient(
          to right,
          transparent 0px,
          transparent 79px,
          rgba(255, 255, 255, 0.1) 80px
        )`}})]})}function MultiTrackEditor({tracks:e}){let{setTrackVolume:t,setTrackMute:r,setTrackSolo:n,loadAudioToTrack:i}=useAudioEngine(),[o,l]=(0,s.useState)(null),c=(0,s.useRef)(null),[p,x]=(0,s.useState)(null),handleVolumeChange=(e,r)=>{t(e,0===r?-60:(r-100)*.6)},handleFileUpload=async(e,t)=>{x(e);try{let r=URL.createObjectURL(t);await i(e,r),console.log(`Loaded ${t.name} to track ${e}`)}catch(e){console.error("Error loading audio:",e)}finally{x(null)}},openFileDialog=e=>{l(e),c.current?.click()};return 0===e.length?(0,a.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"rgba(255, 255, 255, 0.4)",textAlign:"center",gap:"16px"},children:[a.jsx(d.Z,{size:64}),(0,a.jsxs)("div",{children:[a.jsx("h3",{style:{fontSize:"18px",marginBottom:"8px"},children:"No tracks yet"}),a.jsx("p",{style:{fontSize:"14px"},children:'Click the "+ Track" button to create your first track'})]})]}):(0,a.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",background:"#0a0a0a"},children:[a.jsx("div",{style:{height:"40px",background:"linear-gradient(180deg, #1a1a1a 0%, #141414 100%)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",paddingLeft:"200px",fontSize:"11px",color:"rgba(255, 255, 255, 0.6)"},children:Array.from({length:20},(e,t)=>(0,a.jsxs)("div",{style:{width:"80px",borderLeft:0===t?"none":"1px solid rgba(255, 255, 255, 0.1)",paddingLeft:"8px",height:"100%",display:"flex",alignItems:"center"},children:[t,":00"]},t))}),a.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"auto"},children:e.map((t,s)=>(0,a.jsxs)("div",{style:{height:"80px",display:"flex",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:s%2==0?"rgba(255, 255, 255, 0.02)":"transparent"},children:[(0,a.jsxs)("div",{style:{width:"200px",background:"linear-gradient(90deg, #1a1a1a 0%, #161616 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[a.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(d.Z,{size:12,style:{color:"#ffffff"}})}),a.jsx("span",{style:{color:"#ffffff",fontSize:"13px",fontWeight:"500",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name})]}),a.jsx("button",{style:{background:"transparent",border:"none",color:"rgba(255, 255, 255, 0.5)",cursor:"pointer",padding:"2px"},children:a.jsx(E.Z,{size:14})})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:()=>r(t.id,!t.muted),style:{width:"24px",height:"20px",background:t.muted?"#ef4444":"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"3px",color:"#ffffff",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:"M"}),a.jsx("button",{onClick:()=>n(t.id,!t.solo),style:{width:"24px",height:"20px",background:t.solo?"#f59e0b":"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"3px",color:"#ffffff",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:"S"}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"4px"},children:[a.jsx(L.Z,{size:10,style:{color:"rgba(255, 255, 255, 0.4)"}}),a.jsx("input",{type:"range",min:"0",max:"100",value:Math.min(100,Math.max(0,(t.volume+60)/.6)),onChange:e=>handleVolumeChange(t.id,Number(e.target.value)),style:{flex:1,height:"4px",accentColor:"#8b5cf6",opacity:t.muted?.3:1}}),a.jsx(P.Z,{size:10,style:{color:"rgba(255, 255, 255, 0.4)"}})]}),a.jsx("button",{onClick:()=>openFileDialog(t.id),disabled:p===t.id,style:{width:"20px",height:"20px",background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"3px",color:"#8b5cf6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:p===t.id?.5:1,transition:"all 0.2s"},title:"Upload audio file",children:a.jsx(m.Z,{size:10})})]})]}),a.jsx("div",{style:{flex:1,position:"relative",background:"#0a0a0a"},children:a.jsx(WaveformDisplay,{trackId:t.id,height:80,isActive:!t.muted&&(!e.some(e=>e.solo)||t.solo)})})]},t.id))}),a.jsx("input",{ref:c,type:"file",accept:"audio/*",style:{display:"none"},onChange:e=>{let t=e.target.files?.[0];t&&o&&handleFileUpload(o,t),e.target.value=""}})]})}function ChannelStrip({track:e,onVolumeChange:t,onMuteToggle:r,onSoloToggle:n,onAddEffect:i}){let[o,l]=(0,s.useState)(0),[c,p]=(0,s.useState)(0),[x,f]=(0,s.useState)(0),[g,u]=(0,s.useState)(0),b=Math.min(100,Math.max(0,(e.volume+60)/.6));return(0,a.jsxs)("div",{style:{width:"80px",height:"100%",background:"linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"12px 8px",display:"flex",flexDirection:"column",gap:"12px",marginRight:"8px"},children:[(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:"8px"},children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 8px"},children:a.jsx(d.Z,{size:16,style:{color:"#ffffff"}})}),a.jsx("div",{style:{color:"#ffffff",fontSize:"10px",fontWeight:"600",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsx("div",{style:{fontSize:"9px",color:"rgba(255, 255, 255, 0.5)",textAlign:"center",marginBottom:"4px"},children:"EFFECTS"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:["reverb","delay","distortion","filter"].map(t=>a.jsx("button",{onClick:()=>i(e.id,t),style:{padding:"2px 4px",background:e.effects.some(e=>e.name.toLowerCase().includes(t))?"rgba(139, 92, 246, 0.3)":"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"2px",color:"#ffffff",fontSize:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:r=>{e.effects.some(e=>e.name.toLowerCase().includes(t))||(r.currentTarget.style.background="rgba(255, 255, 255, 0.1)")},onMouseLeave:r=>{e.effects.some(e=>e.name.toLowerCase().includes(t))||(r.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},children:t.toUpperCase()},t))})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a.jsx("div",{style:{fontSize:"9px",color:"rgba(255, 255, 255, 0.5)",textAlign:"center"},children:"EQ"}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[a.jsx("span",{style:{fontSize:"8px",color:"rgba(255, 255, 255, 0.6)"},children:"HI"}),a.jsx("input",{type:"range",min:"-12",max:"12",step:"0.1",value:o,onChange:e=>l(Number(e.target.value)),style:{width:"50px",height:"4px",accentColor:"#8b5cf6",transform:"rotate(-90deg)"}}),(0,a.jsxs)("span",{style:{fontSize:"7px",color:"rgba(255, 255, 255, 0.4)"},children:[o>0?"+":"",o.toFixed(1)]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[a.jsx("span",{style:{fontSize:"8px",color:"rgba(255, 255, 255, 0.6)"},children:"MD"}),a.jsx("input",{type:"range",min:"-12",max:"12",step:"0.1",value:c,onChange:e=>p(Number(e.target.value)),style:{width:"50px",height:"4px",accentColor:"#8b5cf6",transform:"rotate(-90deg)"}}),(0,a.jsxs)("span",{style:{fontSize:"7px",color:"rgba(255, 255, 255, 0.4)"},children:[c>0?"+":"",c.toFixed(1)]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[a.jsx("span",{style:{fontSize:"8px",color:"rgba(255, 255, 255, 0.6)"},children:"LO"}),a.jsx("input",{type:"range",min:"-12",max:"12",step:"0.1",value:x,onChange:e=>f(Number(e.target.value)),style:{width:"50px",height:"4px",accentColor:"#8b5cf6",transform:"rotate(-90deg)"}}),(0,a.jsxs)("span",{style:{fontSize:"7px",color:"rgba(255, 255, 255, 0.4)"},children:[x>0?"+":"",x.toFixed(1)]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[a.jsx("span",{style:{fontSize:"8px",color:"rgba(255, 255, 255, 0.6)"},children:"PAN"}),a.jsx("input",{type:"range",min:"-100",max:"100",value:g,onChange:e=>u(Number(e.target.value)),style:{width:"60px",height:"4px",accentColor:"#8b5cf6"}}),a.jsx("span",{style:{fontSize:"7px",color:"rgba(255, 255, 255, 0.4)"},children:0===g?"C":g>0?`R${g}`:`L${Math.abs(g)}`})]}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minHeight:"200px"},children:[a.jsx("span",{style:{fontSize:"8px",color:"rgba(255, 255, 255, 0.6)"},children:"VOLUME"}),a.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:a.jsx("input",{type:"range",min:"0",max:"100",value:b,onChange:r=>t(e.id,Number(r.target.value)),style:{width:"150px",height:"6px",accentColor:e.muted?"#666666":"#8b5cf6",transform:"rotate(-90deg)",opacity:e.muted?.5:1}})}),a.jsx("span",{style:{fontSize:"7px",color:e.muted?"rgba(255, 255, 255, 0.3)":"rgba(255, 255, 255, 0.6)",fontFamily:"monospace"},children:e.volume>-60?`${e.volume.toFixed(1)}dB`:"-∞"})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsx("button",{onClick:()=>r(e.id,!e.muted),style:{width:"100%",height:"24px",background:e.muted?"#ef4444":"rgba(255, 255, 255, 0.1)",border:e.muted?"1px solid #ef4444":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#ffffff",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:t=>{e.muted||(t.currentTarget.style.background="rgba(239, 68, 68, 0.2)",t.currentTarget.style.borderColor="rgba(239, 68, 68, 0.5)")},onMouseLeave:t=>{e.muted||(t.currentTarget.style.background="rgba(255, 255, 255, 0.1)",t.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)")},children:"MUTE"}),a.jsx("button",{onClick:()=>n(e.id,!e.solo),style:{width:"100%",height:"24px",background:e.solo?"#f59e0b":"rgba(255, 255, 255, 0.1)",border:e.solo?"1px solid #f59e0b":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#ffffff",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:t=>{e.solo||(t.currentTarget.style.background="rgba(245, 158, 11, 0.2)",t.currentTarget.style.borderColor="rgba(245, 158, 11, 0.5)")},onMouseLeave:t=>{e.solo||(t.currentTarget.style.background="rgba(255, 255, 255, 0.1)",t.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)")},children:"SOLO"})]})]})}function MixerPanel({tracks:e}){let{setTrackVolume:t,setTrackMute:r,setTrackSolo:s,addEffect:n}=useAudioEngine(),handleVolumeChange=(e,r)=>{t(e,0===r?-60:(r-100)*.6)};return 0===e.length?(0,a.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"rgba(255, 255, 255, 0.4)",textAlign:"center",gap:"16px"},children:[a.jsx(z.Z,{size:64}),(0,a.jsxs)("div",{children:[a.jsx("h3",{style:{fontSize:"18px",marginBottom:"8px"},children:"No tracks to mix"}),a.jsx("p",{style:{fontSize:"14px"},children:"Create some tracks to start mixing"})]})]}):(0,a.jsxs)("div",{style:{width:"100%",height:"100%",background:"#0a0a0a",padding:"20px",overflowX:"auto"},children:[(0,a.jsxs)("div",{style:{marginBottom:"20px",paddingBottom:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,a.jsxs)("h2",{style:{color:"#ffffff",fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx(z.Z,{size:20}),"Mixer"]}),(0,a.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"13px",margin:0},children:[e.length," channel",1!==e.length?"s":""," • Professional mixing console"]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0",overflowX:"auto",paddingBottom:"20px",minHeight:"600px"},children:[e.map(e=>a.jsx(ChannelStrip,{track:e,onVolumeChange:handleVolumeChange,onMuteToggle:r,onSoloToggle:s,onAddEffect:n},e.id)),(0,a.jsxs)("div",{style:{width:"80px",height:"100%",background:"linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%)",border:"2px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",padding:"12px 8px",display:"flex",flexDirection:"column",gap:"12px",marginLeft:"16px"},children:[(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:"8px"},children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 8px"},children:a.jsx(P.Z,{size:16,style:{color:"#ffffff"}})}),a.jsx("div",{style:{color:"#f59e0b",fontSize:"10px",fontWeight:"600",textAlign:"center"},children:"MASTER"})]}),a.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minHeight:"200px"},children:a.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:a.jsx("input",{type:"range",min:"0",max:"100",defaultValue:"75",style:{width:"150px",height:"8px",accentColor:"#f59e0b",transform:"rotate(-90deg)"}})})})]})]})]})}let D=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],F=[6,5,4,3,2,1];function PianoRoll(){let{tracks:e,playNote:t,createTrack:r}=useAudioEngine(),[n,i]=(0,s.useState)(""),[o,l]=(0,s.useState)(null),c=(0,s.useRef)(null),p=e.filter(e=>e.name.toLowerCase().includes("midi")||e.name.toLowerCase().includes("synth")),x=p[0]?.id||"",playNoteOnTrack=(e,r)=>{let a=`${e}${r}`,s=n||x;s&&(t(s,a,"8n"),l(a),setTimeout(()=>l(null),200))},createMidiTrack=async()=>{let e=await r("MIDI Synth","midi");i(e)},isBlackKey=e=>e.includes("#");return 0===e.length?(0,a.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"rgba(255, 255, 255, 0.4)",textAlign:"center",gap:"16px"},children:[a.jsx(d.Z,{size:64}),(0,a.jsxs)("div",{children:[a.jsx("h3",{style:{fontSize:"18px",marginBottom:"8px"},children:"No tracks available"}),a.jsx("p",{style:{fontSize:"14px",marginBottom:"16px"},children:"Create a MIDI track to use the piano roll"}),a.jsx("button",{onClick:createMidiTrack,style:{padding:"10px 20px",background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",border:"none",borderRadius:"6px",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.05)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:"Create MIDI Track"})]})]}):(0,a.jsxs)("div",{style:{width:"100%",height:"100%",background:"#0a0a0a",display:"flex",flexDirection:"column"},children:[(0,a.jsxs)("div",{style:{height:"60px",background:"linear-gradient(180deg, #1a1a1a 0%, #141414 100%)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx(d.Z,{size:20,style:{color:"#8b5cf6"}}),a.jsx("h2",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"600"},children:"Piano Roll Editor"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,a.jsxs)("select",{value:n,onChange:e=>i(e.target.value),style:{padding:"6px 12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#ffffff",fontSize:"13px",outline:"none"},children:[a.jsx("option",{value:"",children:"Select Track"}),e.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)("button",{onClick:createMidiTrack,style:{padding:"6px 12px",background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"4px",color:"#8b5cf6",fontSize:"13px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[a.jsx(d.Z,{size:14}),"Add MIDI"]})]})]}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[a.jsx("div",{style:{width:"120px",background:"#141414",borderRight:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column"},children:F.map(e=>D.slice().reverse().map(t=>{let r=`${t}${e}`,s=isBlackKey(t),n=o===r;return a.jsx("button",{onMouseDown:()=>playNoteOnTrack(t,e),style:{height:"20px",background:n?"#8b5cf6":s?"#2a2a2a":"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRight:"none",color:s||n?"#ffffff":"#000000",fontSize:"11px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"8px",transition:"all 0.1s",userSelect:"none"},onMouseEnter:e=>{n||(e.currentTarget.style.background=s?"#3a3a3a":"#f0f0f0")},onMouseLeave:e=>{n||(e.currentTarget.style.background=s?"#2a2a2a":"#ffffff")},children:"C"===t?r:""},r)}))}),(0,a.jsxs)("div",{ref:c,style:{flex:1,background:"#0f0f0f",position:"relative",overflow:"auto"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
              repeating-linear-gradient(
                to bottom,
                transparent 0px,
                transparent 19px,
                rgba(255, 255, 255, 0.05) 20px
              ),
              repeating-linear-gradient(
                to right,
                transparent 0px,
                transparent 39px,
                rgba(255, 255, 255, 0.1) 40px
              )
            `,pointerEvents:"none"}}),a.jsx("div",{style:{display:"flex",flexDirection:"column",minHeight:`${F.length*D.length*20}px`,minWidth:"800px"},children:F.map(e=>D.slice().reverse().map(t=>{let r=isBlackKey(t);return a.jsx("div",{style:{height:"20px",background:r?"rgba(0, 0, 0, 0.2)":"transparent",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",position:"relative",cursor:"crosshair"},onClick:r=>{console.log(`Add note ${t}${e} at position`,r.clientX)}},`${t}${e}`)}))}),a.jsx("div",{style:{position:"sticky",top:0,height:"30px",background:"linear-gradient(180deg, #1a1a1a 0%, #141414 100%)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",fontSize:"11px",color:"rgba(255, 255, 255, 0.6)",zIndex:10},children:Array.from({length:20},(e,t)=>a.jsx("div",{style:{width:"40px",borderLeft:0===t?"none":"1px solid rgba(255, 255, 255, 0.1)",paddingLeft:"4px",height:"100%",display:"flex",alignItems:"center"},children:t+1},t))})]})]}),(0,a.jsxs)("div",{style:{height:"40px",background:"rgba(255, 255, 255, 0.02)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",paddingLeft:"20px",fontSize:"12px",color:"rgba(255, 255, 255, 0.5)"},children:["Click piano keys to play notes • Click grid to add notes (coming soon) •",n?`Playing on: ${e.find(e=>e.id===n)?.name}`:"Select a track to play notes"]})]})}var W=r(48772),$=r(24483);let AudioFileHandler=class AudioFileHandler{static{this.SUPPORTED_IMPORT_FORMATS=[".wav",".mp3",".ogg",".m4a",".flac",".aac"]}static{this.EXPORT_FORMATS={WAV:"audio/wav",MP3:"audio/mpeg",OGG:"audio/ogg"}}static async importAudioFile(e){let t="."+e.name.split(".").pop()?.toLowerCase();if(!this.SUPPORTED_IMPORT_FORMATS.includes(t))throw Error(`Unsupported file format: ${t}`);let r=URL.createObjectURL(e),a={name:e.name,size:e.size};try{let t=new AudioContext,s=await e.arrayBuffer(),n=await t.decodeAudioData(s);return a.duration=n.duration,a.sampleRate=n.sampleRate,a.channels=n.numberOfChannels,t.close(),{url:r,info:a,buffer:n}}catch(e){return console.warn("Could not decode audio for metadata:",e),{url:r,info:a}}}static async importMultipleAudioFiles(e){let t=Array.from(e).map(e=>this.importAudioFile(e));return Promise.all(t)}static async exportToWAV(e=10){let t=await getTone();if(!t)throw Error("Tone.js not available");let r=new t.OfflineContext(2,e,44100),a=new t.Recorder;a.connect(r.destination),await a.start(),await r.render();let s=await a.stop();return s}static async exportProject(e="wav"){let t=await getTone();if(!t)throw Error("Tone.js not available");let r=new t.Recorder;r.connect(t.Destination),await r.start(),t.Transport.start(),await new Promise(e=>setTimeout(e,5e3)),t.Transport.stop();let a=await r.stop();return a}static audioBufferToWAV(e){let t=e.length*e.numberOfChannels*2,r=new ArrayBuffer(44+t),a=new DataView(r),writeString=(e,t)=>{for(let r=0;r<t.length;r++)a.setUint8(e+r,t.charCodeAt(r))};writeString(0,"RIFF"),a.setUint32(4,36+t,!0),writeString(8,"WAVE"),writeString(12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,e.numberOfChannels,!0),a.setUint32(24,e.sampleRate,!0),a.setUint32(28,e.sampleRate*e.numberOfChannels*2,!0),a.setUint16(32,2*e.numberOfChannels,!0),a.setUint16(34,16,!0),writeString(36,"data"),a.setUint32(40,t,!0);let s=[];for(let t=0;t<e.numberOfChannels;t++)s.push(e.getChannelData(t));let n=44;for(let t=0;t<e.length;t++)for(let r=0;r<e.numberOfChannels;r++){let e=Math.max(-1,Math.min(1,s[r][t]));a.setInt16(n,32767*e,!0),n+=2}return new Blob([r],{type:"audio/wav"})}static downloadBlob(e,t){let r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}static async exportAndDownload(e="bitcoin-music-project.wav"){try{let t=await this.exportProject("wav");return this.downloadBlob(t,e),console.log(`Exported project as ${e}`),!0}catch(e){return console.error("Failed to export project:",e),!1}}static async loadProject(e){if(!e.name.endsWith(".json"))throw Error("Project files must be in JSON format");let t=await e.text(),r=JSON.parse(t);if(!r.version||!r.tracks||!r.settings)throw Error("Invalid project file structure");return r}static saveProject(e,t="bitcoin-music-project.json"){let r={version:"1.0.0",timestamp:new Date().toISOString(),...e},a=JSON.stringify(r,null,2),s=new Blob([a],{type:"application/json"});return this.downloadBlob(s,t),console.log(`Saved project as ${t}`),!0}};function FileManager(){let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(!1),o=(0,s.useRef)(null),l=(0,s.useRef)(null),{tracks:c,audioEngine:p,createTrack:x,deleteTrack:f,loadAudioToTrack:g}=useAudioEngine(),handleImportAudio=async e=>{let r=e.target.files;if(r&&0!==r.length){t(!0);try{let e=await AudioFileHandler.importMultipleAudioFiles(r);for(let{url:t,info:r}of e){let e=r.name.replace(/\.[^/.]+$/,""),a=await x(e,"audio");await g(a,t),console.log(`Imported ${r.name} to track ${a}`)}}catch(e){console.error("Failed to import audio:",e),alert("Failed to import audio file(s)")}finally{t(!1),o.current&&(o.current.value="")}}},handleExportProject=async(e="wav")=>{n(!0);try{let t=new Date().toISOString().slice(0,19).replace(/:/g,"-"),r=`bitcoin-music-${t}.${e}`;await AudioFileHandler.exportAndDownload(r)}catch(e){console.error("Failed to export project:",e),alert("Failed to export project")}finally{n(!1)}},handleSaveProject=async()=>{try{let e={tracks:c.map(e=>({id:e.id,name:e.name,volume:e.volume,muted:e.muted,solo:e.solo})),settings:{bpm:await p.getBPM(),position:await p.getPosition()}},t=new Date().toISOString().slice(0,19).replace(/:/g,"-");AudioFileHandler.saveProject(e,`bitcoin-music-project-${t}.json`)}catch(e){console.error("Failed to save project:",e),alert("Failed to save project")}},handleLoadProject=async e=>{let t=e.target.files?.[0];if(t)try{let e=await AudioFileHandler.loadProject(t);for(let e of c)await f(e.id);for(let t of e.tracks){let e=await x(t.name,"audio");p.setTrackVolume(e,t.volume),p.setTrackMute(e,t.muted),p.setTrackSolo(e,t.solo)}e.settings&&(await p.setBPM(e.settings.bpm),await p.setPosition(e.settings.position||"0:0:0")),console.log("Project loaded successfully")}catch(e){console.error("Failed to load project:",e),alert("Failed to load project file")}finally{l.current&&(l.current.value="")}};return(0,a.jsxs)("div",{className:"bg-card rounded-lg p-4 space-y-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"File Manager"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-xs text-muted-foreground",children:"Import Audio"}),(0,a.jsxs)("button",{onClick:()=>o.current?.click(),disabled:e,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-secondary hover:bg-secondary/80 rounded-md text-sm transition-colors disabled:opacity-50",children:[a.jsx(m.Z,{className:"w-4 h-4"}),e?"Importing...":"Import Audio Files"]}),a.jsx("input",{ref:o,type:"file",multiple:!0,accept:AudioFileHandler.SUPPORTED_IMPORT_FORMATS.join(","),onChange:handleImportAudio,className:"hidden"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports: WAV, MP3, OGG, M4A, FLAC, AAC"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-xs text-muted-foreground",children:"Export Project"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>handleExportProject("wav"),disabled:r,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-secondary hover:bg-secondary/80 rounded-md text-sm transition-colors disabled:opacity-50",children:[a.jsx(W.Z,{className:"w-4 h-4"}),r?"Exporting...":"Export WAV"]}),(0,a.jsxs)("button",{onClick:()=>handleExportProject("mp3"),disabled:r||!0,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-secondary hover:bg-secondary/80 rounded-md text-sm transition-colors disabled:opacity-50",title:"MP3 export coming soon",children:[a.jsx(d.Z,{className:"w-4 h-4"}),"Export MP3"]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[a.jsx("label",{className:"block text-xs text-muted-foreground",children:"Project"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:handleSaveProject,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded-md text-sm transition-colors",children:[a.jsx($.Z,{className:"w-4 h-4"}),"Save Project"]}),(0,a.jsxs)("button",{onClick:()=>l.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-secondary hover:bg-secondary/80 rounded-md text-sm transition-colors",children:[a.jsx(i.Z,{className:"w-4 h-4"}),"Load Project"]})]}),a.jsx("input",{ref:l,type:"file",accept:".json",onChange:handleLoadProject,className:"hidden"})]}),c.length>0&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-center",children:[c.length," track",1!==c.length?"s":""," in project"]})]})}function StudioInterface(){let{isPlaying:e,isRecording:t,bpm:r,position:n,tracks:o,play:l,pause:p,stop:x,startRecording:f,stopRecording:g,setBPM:u,createTrack:b}=useAudioEngine(),[h,m]=(0,s.useState)("arrange"),[j,v]=(0,s.useState)(75),[k,w]=(0,s.useState)(!1),[S,E]=(0,s.useState)("Untitled Project"),[L,Z]=(0,s.useState)(!1),[D,F]=(0,s.useState)(!1),[W,$]=(0,s.useState)(null),handlePlayPause=async()=>{e?p():await l()},handleRecord=async()=>{if(t){let e=await g();e&&($(e),console.log("Recording complete, blob size:",e.size))}else await f()};return(0,a.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",background:"#0a0a0a"},className:"jsx-fffdc8eff280950b",children:[(0,a.jsxs)("div",{style:{height:"48px",background:"linear-gradient(180deg, #1a1a1a 0%, #141414 100%)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},className:"jsx-fffdc8eff280950b",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},className:"jsx-fffdc8eff280950b",children:[a.jsx(d.Z,{size:20,style:{color:"#8b5cf6"}}),L?a.jsx("input",{type:"text",value:S,onChange:e=>E(e.target.value),onBlur:()=>Z(!1),onKeyDown:e=>{"Enter"===e.key&&Z(!1)},style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(139, 92, 246, 0.5)",borderRadius:"4px",padding:"4px 8px",color:"#ffffff",fontSize:"14px",fontWeight:"600",outline:"none"},autoFocus:!0,className:"jsx-fffdc8eff280950b"}):a.jsx("h2",{onClick:()=>Z(!0),style:{color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:e=>e.currentTarget.style.background="transparent",className:"jsx-fffdc8eff280950b",children:S})]}),a.jsx("div",{style:{display:"flex",gap:"4px",background:"rgba(255, 255, 255, 0.05)",padding:"4px",borderRadius:"6px"},className:"jsx-fffdc8eff280950b",children:[{id:"arrange",icon:a.jsx(T.Z,{size:16}),label:"Arrange"},{id:"mixer",icon:a.jsx(z.Z,{size:16}),label:"Mixer"},{id:"piano",icon:a.jsx(c.Z,{size:16}),label:"Piano Roll"}].map(e=>(0,a.jsxs)("button",{onClick:()=>m(e.id),style:{padding:"6px 12px",background:h===e.id?"rgba(139, 92, 246, 0.2)":"transparent",border:"none",borderRadius:"4px",color:h===e.id?"#8b5cf6":"#ffffff",fontSize:"12px",fontWeight:h===e.id?"600":"400",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:t=>{h!==e.id&&(t.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},onMouseLeave:t=>{h!==e.id&&(t.currentTarget.style.background="transparent")},className:"jsx-fffdc8eff280950b",children:[e.icon,a.jsx("span",{className:"jsx-fffdc8eff280950b",children:e.label})]},e.id))}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},className:"jsx-fffdc8eff280950b",children:[(0,a.jsxs)("button",{onClick:()=>{let e=b(`Track ${o.length+1}`);console.log("Created track:",e)},style:{padding:"6px 10px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#ffffff",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)"},className:"jsx-fffdc8eff280950b",children:[a.jsx(y.Z,{size:14}),a.jsx("span",{className:"jsx-fffdc8eff280950b",children:"Track"})]}),(0,a.jsxs)("button",{onClick:()=>F(!D),style:{padding:"6px 10px",background:D?"rgba(139, 92, 246, 0.2)":"transparent",border:"1px solid "+(D?"rgba(139, 92, 246, 0.3)":"rgba(255, 255, 255, 0.2)"),borderRadius:"4px",color:D?"#8b5cf6":"#ffffff",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background=D?"rgba(139, 92, 246, 0.3)":"rgba(255, 255, 255, 0.05)",e.currentTarget.style.borderColor=D?"rgba(139, 92, 246, 0.4)":"rgba(255, 255, 255, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background=D?"rgba(139, 92, 246, 0.2)":"transparent",e.currentTarget.style.borderColor=D?"rgba(139, 92, 246, 0.3)":"rgba(255, 255, 255, 0.2)"},className:"jsx-fffdc8eff280950b",children:[a.jsx(i.Z,{size:14}),a.jsx("span",{className:"jsx-fffdc8eff280950b",children:"Files"})]}),W&&(0,a.jsxs)("button",{onClick:()=>{if(W){let e=URL.createObjectURL(W),t=document.createElement("a");t.href=e,t.download=`${S}_recording.wav`,t.click(),URL.revokeObjectURL(e)}},style:{padding:"6px 10px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"4px",color:"#8b5cf6",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(139, 92, 246, 0.2)",e.currentTarget.style.borderColor="rgba(139, 92, 246, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(139, 92, 246, 0.1)",e.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},className:"jsx-fffdc8eff280950b",children:[a.jsx(M.Z,{size:14}),a.jsx("span",{className:"jsx-fffdc8eff280950b",children:"Export"})]})]})]}),(0,a.jsxs)("div",{style:{height:"64px",background:"linear-gradient(180deg, #141414 0%, #0f0f0f 100%)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"24px",padding:"0 24px"},className:"jsx-fffdc8eff280950b",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},className:"jsx-fffdc8eff280950b",children:[a.jsx("button",{onClick:()=>x(),style:{width:"36px",height:"36px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="scale(1)"},className:"jsx-fffdc8eff280950b",children:a.jsx(R.Z,{size:18})}),a.jsx("button",{onClick:handlePlayPause,style:{width:"48px",height:"48px",background:e?"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)":"rgba(255, 255, 255, 0.05)",border:e?"2px solid rgba(139, 92, 246, 0.5)":"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"50%",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:t=>{e||(t.currentTarget.style.background="rgba(255, 255, 255, 0.1)"),t.currentTarget.style.transform="scale(1.05)"},onMouseLeave:t=>{e||(t.currentTarget.style.background="rgba(255, 255, 255, 0.05)"),t.currentTarget.style.transform="scale(1)"},className:"jsx-fffdc8eff280950b",children:e?a.jsx(I.Z,{size:20}):a.jsx(B.Z,{size:20,style:{marginLeft:"2px"}})}),a.jsx("button",{onClick:()=>{x()},style:{width:"36px",height:"36px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="scale(1)"},className:"jsx-fffdc8eff280950b",children:a.jsx(A.Z,{size:16})}),a.jsx("button",{onClick:handleRecord,style:{width:"36px",height:"36px",background:t?"rgba(239, 68, 68, 0.2)":"rgba(255, 255, 255, 0.05)",border:t?"1px solid rgba(239, 68, 68, 0.5)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"50%",color:t?"#ef4444":"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",animation:t?"pulse 2s infinite":"none"},onMouseEnter:e=>{t||(e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"),e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{t||(e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"),e.currentTarget.style.transform="scale(1)"},className:"jsx-fffdc8eff280950b",children:a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:t?"#ef4444":"#ffffff"},className:"jsx-fffdc8eff280950b"})}),a.jsx("button",{onClick:()=>w(!k),style:{width:"36px",height:"36px",background:k?"rgba(139, 92, 246, 0.2)":"rgba(255, 255, 255, 0.05)",border:k?"1px solid rgba(139, 92, 246, 0.5)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:k?"#8b5cf6":"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},className:"jsx-fffdc8eff280950b",children:a.jsx(N.Z,{size:18})})]}),a.jsx("div",{style:{padding:"8px 16px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",fontFamily:"monospace",fontSize:"18px",fontWeight:"600",color:"#8b5cf6",minWidth:"120px",textAlign:"center"},className:"jsx-fffdc8eff280950b",children:(e=>{try{let t=e.split(":");if(t.length>=3){let e=parseInt(t[0]),r=parseInt(t[1]),a=parseInt(t[2]);return`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}return e}catch{return"00:00:00"}})(n)}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px"},className:"jsx-fffdc8eff280950b",children:[a.jsx("span",{style:{color:"#ffffff",fontSize:"12px",opacity:.7},className:"jsx-fffdc8eff280950b",children:"BPM"}),a.jsx("input",{type:"number",value:r,onChange:e=>u(Number(e.target.value)),min:"60",max:"200",style:{width:"50px",background:"transparent",border:"none",color:"#ffffff",fontSize:"14px",fontWeight:"600",textAlign:"center",outline:"none"},className:"jsx-fffdc8eff280950b"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px"},className:"jsx-fffdc8eff280950b",children:[a.jsx(P.Z,{size:16,style:{color:"#ffffff",opacity:.7}}),a.jsx("input",{type:"range",min:"0",max:"100",value:j,onChange:e=>v(Number(e.target.value)),style:{width:"100px",accentColor:"#8b5cf6"},className:"jsx-fffdc8eff280950b"}),(0,a.jsxs)("span",{style:{color:"#ffffff",fontSize:"12px",minWidth:"30px"},className:"jsx-fffdc8eff280950b",children:[j,"%"]})]}),(0,a.jsxs)("div",{style:{padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},className:"jsx-fffdc8eff280950b",children:[o.length," tracks"]})]}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",overflow:"hidden",position:"relative"},className:"jsx-fffdc8eff280950b",children:[a.jsx("div",{style:{flex:1,overflow:"hidden"},className:"jsx-fffdc8eff280950b",children:(()=>{switch(h){case"mixer":return a.jsx(MixerPanel,{tracks:o});case"piano":return a.jsx(PianoRoll,{});default:return a.jsx(MultiTrackEditor,{tracks:o})}})()}),D&&a.jsx("div",{style:{width:"280px",background:"#0f0f0f",borderLeft:"1px solid rgba(255, 255, 255, 0.1)",padding:"16px",overflowY:"auto"},className:"jsx-fffdc8eff280950b",children:a.jsx(FileManager,{})})]}),a.jsx(C(),{id:"fffdc8eff280950b",children:"@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-moz-keyframes pulse{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-o-keyframes pulse{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}"})]})}var O=r(57034),U=r(83238),V=r(17856),_=r(73916);function MarketplaceView(){let[e,t]=(0,s.useState)("grid"),[r,n]=(0,s.useState)(""),i=[{id:1,title:"Summer Vibes EP",artist:"DJ Crypto",price:"0.5 BSV",plays:"12.3k",rating:4.8},{id:2,title:"Blockchain Blues",artist:"The Miners",price:"0.3 BSV",plays:"8.7k",rating:4.6},{id:3,title:"Digital Dreams",artist:"Synth Master",price:"0.8 BSV",plays:"15.2k",rating:4.9},{id:4,title:"Crypto Beats Vol.1",artist:"Beat Maker",price:"0.4 BSV",plays:"6.5k",rating:4.5}];return(0,a.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",background:"#0a0a0a"},children:[(0,a.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[a.jsx("h1",{style:{color:"#ffffff",fontSize:"24px",fontWeight:"600"},children:"Music NFT Marketplace"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("button",{onClick:()=>t("grid"),style:{padding:"8px",background:"grid"===e?"rgba(139, 92, 246, 0.2)":"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"grid"===e?"#8b5cf6":"#ffffff",cursor:"pointer"},children:a.jsx(O.Z,{size:18})}),a.jsx("button",{onClick:()=>t("list"),style:{padding:"8px",background:"list"===e?"rgba(139, 92, 246, 0.2)":"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"list"===e?"#8b5cf6":"#ffffff",cursor:"pointer"},children:a.jsx(U.Z,{size:18})})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,a.jsxs)("div",{style:{flex:1,position:"relative"},children:[a.jsx(j.Z,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"rgba(255, 255, 255, 0.5)"}}),a.jsx("input",{type:"text",placeholder:"Search music NFTs...",value:r,onChange:e=>n(e.target.value),style:{width:"100%",padding:"10px 10px 10px 40px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#ffffff",fontSize:"14px",outline:"none"}})]}),(0,a.jsxs)("button",{style:{padding:"10px 20px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx(V.Z,{size:18}),"Filters"]})]})]}),a.jsx("div",{style:{padding:"16px 20px",background:"rgba(255, 255, 255, 0.02)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",gap:"32px"},children:[{icon:a.jsx(d.Z,{size:16}),label:"Total NFTs",value:"1,234"},{icon:a.jsx(_.Z,{size:16}),label:"24h Volume",value:"456 BSV"},{icon:a.jsx(u.Z,{size:16}),label:"Floor Price",value:"0.1 BSV"},{icon:a.jsx(o.Z,{size:16}),label:"Latest Drop",value:"2 hours ago"}].map((e,t)=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{color:"#8b5cf6"},children:e.icon}),(0,a.jsxs)("div",{children:[a.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"11px"},children:e.label}),a.jsx("div",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"600"},children:e.value})]})]},t))}),(0,a.jsxs)("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[a.jsx("h2",{style:{color:"#ffffff",fontSize:"18px",marginBottom:"16px"},children:"Featured Music NFTs"}),"grid"===e?a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"20px"},children:i.map(e=>(0,a.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.03)",e.currentTarget.style.transform="translateY(0)"},children:[a.jsx("div",{style:{width:"100%",height:"150px",background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",borderRadius:"6px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(d.Z,{size:48,style:{color:"rgba(255, 255, 255, 0.3)"}})}),a.jsx("h3",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:e.title}),(0,a.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"12px",marginBottom:"8px"},children:["by ",e.artist]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("span",{style:{color:"#8b5cf6",fontSize:"16px",fontWeight:"600"},children:e.price}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"11px"},children:e.plays}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2px"},children:[a.jsx(p.Z,{size:12,style:{color:"#f59e0b"}}),a.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"11px"},children:e.rating})]})]})]})]},e.id))}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:i.map(e=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.03)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(d.Z,{size:24,style:{color:"rgba(255, 255, 255, 0.3)"}})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"600"},children:e.title}),(0,a.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"12px"},children:["by ",e.artist]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[(0,a.jsxs)("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"12px"},children:[e.plays," plays"]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[a.jsx(p.Z,{size:14,style:{color:"#f59e0b"}}),a.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"12px"},children:e.rating})]}),a.jsx("span",{style:{color:"#8b5cf6",fontSize:"16px",fontWeight:"600",minWidth:"80px",textAlign:"right"},children:e.price})]})]},e.id))})]})]})}function LibraryView(){let[e,t]=(0,s.useState)(""),[r,n]=(0,s.useState)("all"),o=[{id:1,name:"Summer Beat.wav",type:"Audio",size:"12.4 MB",modified:"2 hours ago",duration:"3:24"},{id:2,name:"Trap Loop.mid",type:"MIDI",size:"24 KB",modified:"1 day ago",duration:"0:32"},{id:3,name:"Vocals Take 3.mp3",type:"Audio",size:"8.2 MB",modified:"3 days ago",duration:"2:15"},{id:4,name:"Project Alpha.bms",type:"Project",size:"45.6 MB",modified:"1 week ago",duration:"5:12"},{id:5,name:"Bass Line.wav",type:"Audio",size:"6.8 MB",modified:"2 weeks ago",duration:"1:45"}];return(0,a.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",background:"#0a0a0a"},children:[(0,a.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[a.jsx("h1",{style:{color:"#ffffff",fontSize:"24px",fontWeight:"600",marginBottom:"20px"},children:"Music Library"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[(0,a.jsxs)("div",{style:{flex:1,position:"relative"},children:[a.jsx(j.Z,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"rgba(255, 255, 255, 0.5)"}}),a.jsx("input",{type:"text",placeholder:"Search your library...",value:e,onChange:e=>t(e.target.value),style:{width:"100%",padding:"10px 10px 10px 40px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#ffffff",fontSize:"14px",outline:"none"}})]}),(0,a.jsxs)("button",{style:{padding:"10px 20px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx(V.Z,{size:18}),"Filters"]})]}),a.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto"},children:[{id:"all",label:"All Files",count:234},{id:"projects",label:"Projects",count:12},{id:"audio",label:"Audio Files",count:156},{id:"midi",label:"MIDI",count:45},{id:"samples",label:"Samples",count:89},{id:"presets",label:"Presets",count:34}].map(e=>(0,a.jsxs)("button",{onClick:()=>n(e.id),style:{padding:"8px 16px",background:r===e.id?"rgba(139, 92, 246, 0.2)":"rgba(255, 255, 255, 0.05)",border:r===e.id?"1px solid rgba(139, 92, 246, 0.5)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",color:r===e.id?"#8b5cf6":"#ffffff",fontSize:"13px",fontWeight:r===e.id?"600":"400",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[a.jsx("span",{children:e.label}),a.jsx("span",{style:{fontSize:"11px",opacity:.7,background:"rgba(255, 255, 255, 0.1)",padding:"2px 6px",borderRadius:"10px"},children:e.count})]},e.id))})]}),(0,a.jsxs)("div",{style:{flex:1,overflowY:"auto"},children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 100px 100px 120px 80px 40px",padding:"12px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"12px",color:"rgba(255, 255, 255, 0.6)",fontWeight:"600"},children:[a.jsx("div",{}),a.jsx("div",{children:"Name"}),a.jsx("div",{children:"Type"}),a.jsx("div",{children:"Size"}),a.jsx("div",{children:"Modified"}),a.jsx("div",{children:"Duration"}),a.jsx("div",{})]}),o.map(e=>(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 100px 100px 120px 80px 40px",padding:"12px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"13px",color:"#ffffff",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.03)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:[a.jsx("div",{style:{display:"flex",alignItems:"center"},children:a.jsx("button",{style:{background:"transparent",border:"none",color:"#8b5cf6",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:t=>{t.stopPropagation(),console.log("Play:",e.name)},children:a.jsx(B.Z,{size:16})})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"Project"===e.type?"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)":"rgba(139, 92, 246, 0.2)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Project"===e.type?a.jsx(i.Z,{size:16}):a.jsx(d.Z,{size:16})}),a.jsx("span",{style:{fontWeight:"500"},children:e.name})]}),a.jsx("div",{style:{display:"flex",alignItems:"center"},children:a.jsx("span",{style:{padding:"4px 8px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",fontSize:"11px"},children:e.type})}),a.jsx("div",{style:{display:"flex",alignItems:"center",opacity:.7},children:e.size}),a.jsx("div",{style:{display:"flex",alignItems:"center",opacity:.7},children:e.modified}),a.jsx("div",{style:{display:"flex",alignItems:"center",opacity:.7},children:e.duration}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:a.jsx("button",{style:{background:"transparent",border:"none",color:"rgba(255, 255, 255, 0.5)",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:t=>{t.stopPropagation(),console.log("More options:",e.name)},children:a.jsx(E.Z,{size:16})})})]},e.id))]}),(0,a.jsxs)("div",{style:{padding:"12px 20px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"rgba(255, 255, 255, 0.6)"},children:[(0,a.jsxs)("span",{children:[o.length," items"]}),a.jsx("span",{children:"234.5 MB total"})]})]})}var q=r(40290),H=r(15835);function ExchangeView(){let[e,t]=(0,s.useState)("MUSIC/BSV"),[r,n]=(0,s.useState)("buy"),i={bids:[{price:"0.00448",amount:"1,234",total:"5.53"},{price:"0.00447",amount:"2,456",total:"10.98"},{price:"0.00446",amount:"3,789",total:"16.90"},{price:"0.00445",amount:"1,567",total:"6.97"}],asks:[{price:"0.00451",amount:"987",total:"4.45"},{price:"0.00452",amount:"1,543",total:"6.97"},{price:"0.00453",amount:"2,234",total:"10.12"},{price:"0.00454",amount:"1,876",total:"8.52"}]};return(0,a.jsxs)("div",{style:{height:"100%",display:"flex",background:"#0a0a0a"},children:[(0,a.jsxs)("div",{style:{width:"280px",borderRight:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{padding:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:a.jsx("h2",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"600"},children:"Music Token Pairs"})}),a.jsx("div",{style:{flex:1,overflowY:"auto"},children:[{pair:"MUSIC/BSV",price:"0.0045",change:"+5.2%",volume:"1.2M",trending:"up"},{pair:"BEAT/BSV",price:"0.0023",change:"-2.1%",volume:"856K",trending:"down"},{pair:"VINYL/BSV",price:"0.0089",change:"+12.4%",volume:"2.4M",trending:"up"},{pair:"TRACK/BSV",price:"0.0034",change:"+1.8%",volume:"567K",trending:"up"}].map(r=>(0,a.jsxs)("div",{onClick:()=>t(r.pair),style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",cursor:"pointer",background:e===r.pair?"rgba(139, 92, 246, 0.1)":"transparent",transition:"background 0.2s"},onMouseEnter:t=>{e!==r.pair&&(t.currentTarget.style.background="rgba(255, 255, 255, 0.03)")},onMouseLeave:t=>{e!==r.pair&&(t.currentTarget.style.background="transparent")},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"500"},children:r.pair}),(0,a.jsxs)("span",{style:{color:"up"===r.trending?"#10b981":"#ef4444",fontSize:"12px",display:"flex",alignItems:"center",gap:"2px"},children:["up"===r.trending?a.jsx(u.Z,{size:12}):a.jsx(q.Z,{size:12}),r.change]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,a.jsxs)("span",{style:{color:"#ffffff",fontSize:"13px"},children:[r.price," BSV"]}),(0,a.jsxs)("span",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"11px"},children:["Vol: ",r.volume]})]})]},r.pair))})]}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,a.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{style:{color:"#ffffff",fontSize:"20px",fontWeight:"600"},children:e}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginTop:"8px"},children:[a.jsx("span",{style:{color:"#10b981",fontSize:"24px",fontWeight:"600"},children:"0.00450"}),a.jsx("span",{style:{color:"#10b981",fontSize:"14px"},children:"+5.2%"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("button",{style:{padding:"8px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#ffffff",fontSize:"12px",cursor:"pointer"},children:"1H"}),a.jsx("button",{style:{padding:"8px 16px",background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.5)",borderRadius:"4px",color:"#8b5cf6",fontSize:"12px",cursor:"pointer"},children:"1D"}),a.jsx("button",{style:{padding:"8px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#ffffff",fontSize:"12px",cursor:"pointer"},children:"1W"})]})]}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,a.jsxs)("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.3)"},children:[a.jsx(H.Z,{size:48,style:{marginBottom:"12px"}}),a.jsx("p",{children:"Price chart will be displayed here"})]})}),(0,a.jsxs)("div",{style:{height:"300px",display:"flex"},children:[(0,a.jsxs)("div",{style:{flex:1,borderRight:"1px solid rgba(255, 255, 255, 0.1)"},children:[a.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"13px",fontWeight:"600",color:"#ffffff"},children:"Order Book"}),(0,a.jsxs)("div",{style:{display:"flex",height:"calc(100% - 45px)"},children:[(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsxs)("div",{style:{padding:"8px",fontSize:"11px",color:"rgba(255, 255, 255, 0.5)",display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},children:[a.jsx("span",{children:"Price"}),a.jsx("span",{style:{textAlign:"center"},children:"Amount"}),a.jsx("span",{style:{textAlign:"right"},children:"Total"})]}),i.bids.map((e,t)=>(0,a.jsxs)("div",{style:{padding:"6px 8px",fontSize:"12px",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",background:`linear-gradient(to left, rgba(16, 185, 129, 0.1) ${(t+1)*20}%, transparent 0)`},children:[a.jsx("span",{style:{color:"#10b981"},children:e.price}),a.jsx("span",{style:{color:"#ffffff",textAlign:"center"},children:e.amount}),a.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",textAlign:"right"},children:e.total})]},t))]}),(0,a.jsxs)("div",{style:{flex:1,borderLeft:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,a.jsxs)("div",{style:{padding:"8px",fontSize:"11px",color:"rgba(255, 255, 255, 0.5)",display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},children:[a.jsx("span",{children:"Price"}),a.jsx("span",{style:{textAlign:"center"},children:"Amount"}),a.jsx("span",{style:{textAlign:"right"},children:"Total"})]}),i.asks.map((e,t)=>(0,a.jsxs)("div",{style:{padding:"6px 8px",fontSize:"12px",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",background:`linear-gradient(to left, rgba(239, 68, 68, 0.1) ${(t+1)*20}%, transparent 0)`},children:[a.jsx("span",{style:{color:"#ef4444"},children:e.price}),a.jsx("span",{style:{color:"#ffffff",textAlign:"center"},children:e.amount}),a.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",textAlign:"right"},children:e.total})]},t))]})]})]}),(0,a.jsxs)("div",{style:{width:"250px"},children:[a.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"13px",fontWeight:"600",color:"#ffffff"},children:"Recent Trades"}),a.jsx("div",{style:{padding:"8px"},children:[{time:"14:23:45",price:"0.00450",amount:"567",type:"buy"},{time:"14:23:38",price:"0.00449",amount:"234",type:"sell"},{time:"14:23:31",price:"0.00450",amount:"1,234",type:"buy"},{time:"14:23:25",price:"0.00448",amount:"789",type:"sell"}].map((e,t)=>(0,a.jsxs)("div",{style:{padding:"4px 8px",fontSize:"12px",display:"grid",gridTemplateColumns:"80px 1fr 1fr",alignItems:"center"},children:[a.jsx("span",{style:{color:"rgba(255, 255, 255, 0.5)"},children:e.time}),a.jsx("span",{style:{color:"buy"===e.type?"#10b981":"#ef4444",textAlign:"center"},children:e.price}),a.jsx("span",{style:{color:"#ffffff",textAlign:"right"},children:e.amount})]},t))})]})]})]}),(0,a.jsxs)("div",{style:{width:"320px",borderLeft:"1px solid rgba(255, 255, 255, 0.1)",padding:"16px"},children:[a.jsx("div",{style:{marginBottom:"16px"},children:(0,a.jsxs)("div",{style:{display:"flex",gap:"4px",padding:"4px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"},children:[a.jsx("button",{onClick:()=>n("buy"),style:{flex:1,padding:"8px",background:"buy"===r?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"transparent",border:"none",borderRadius:"4px",color:"#ffffff",fontSize:"14px",fontWeight:"buy"===r?"600":"400",cursor:"pointer"},children:"Buy"}),a.jsx("button",{onClick:()=>n("sell"),style:{flex:1,padding:"8px",background:"sell"===r?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"transparent",border:"none",borderRadius:"4px",color:"#ffffff",fontSize:"14px",fontWeight:"sell"===r?"600":"400",cursor:"pointer"},children:"Sell"})]})}),(0,a.jsxs)("div",{style:{marginBottom:"12px"},children:[a.jsx("label",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"12px"},children:"Price (BSV)"}),a.jsx("input",{type:"text",placeholder:"0.00450",style:{width:"100%",padding:"10px",marginTop:"4px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#ffffff",fontSize:"14px",outline:"none"}})]}),(0,a.jsxs)("div",{style:{marginBottom:"12px"},children:[a.jsx("label",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"12px"},children:"Amount (MUSIC)"}),a.jsx("input",{type:"text",placeholder:"0.00",style:{width:"100%",padding:"10px",marginTop:"4px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#ffffff",fontSize:"14px",outline:"none"}})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"12px"},children:"Total (BSV)"}),a.jsx("input",{type:"text",placeholder:"0.00",disabled:!0,style:{width:"100%",padding:"10px",marginTop:"4px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"rgba(255, 255, 255, 0.5)",fontSize:"14px",outline:"none"}})]}),a.jsx("button",{style:{width:"100%",padding:"12px",background:"buy"===r?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",border:"none",borderRadius:"6px",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.02)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:"buy"===r?"Buy MUSIC":"Sell MUSIC"}),(0,a.jsxs)("div",{style:{marginTop:"24px",padding:"12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"6px",fontSize:"12px"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)"},children:"BSV Balance:"}),a.jsx("span",{style:{color:"#ffffff"},children:"12.456 BSV"})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)"},children:"MUSIC Balance:"}),a.jsx("span",{style:{color:"#ffffff"},children:"5,678.90 MUSIC"})]})]})]})]})}var G=r(95833),Y=r(5805),K=r(33466),X=r(85923);function AuthModal({onClose:e}){let[t,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)(""),[l,d]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),handleSubmit=async r=>{r.preventDefault(),g(!0);try{if(t){let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:l,walletAddress:p})});e.ok&&await (0,n.signIn)("credentials",{email:i,password:l,redirect:!1})}else await (0,n.signIn)("credentials",{email:i,password:l,redirect:!1});e()}catch(e){console.error("Auth error:",e)}finally{g(!1)}},handleWalletConnect=async()=>{g(!0),g(!1)};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"relative w-full max-w-md glass-morphism rounded-2xl p-8",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-white/10 transition-colors",children:a.jsx(G.Z,{className:"w-5 h-5 text-gray-300"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[a.jsx(c.Z,{className:"w-10 h-10 text-bitcoin-orange mr-3"}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Create Account":"Welcome Back"})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(Y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:i,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-bitcoin-orange",placeholder:"Enter your email",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(K.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"password",value:l,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-bitcoin-orange",placeholder:"Enter your password",required:!0})]})]}),t&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"BSV Wallet Address (Optional)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(X.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:p,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-bitcoin-orange",placeholder:"Enter your BSV address"})]})]}),a.jsx("button",{type:"submit",disabled:f,className:"w-full py-3 bg-bitcoin-orange text-white font-semibold rounded-lg hover:bg-yellow-600 transition-colors disabled:opacity-50",children:f?"Processing...":t?"Create Account":"Sign In"})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-white/20"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"Or continue with"})})]}),(0,a.jsxs)("button",{onClick:handleWalletConnect,disabled:f,className:"mt-4 w-full flex items-center justify-center space-x-2 py-3 bg-white/10 border border-white/20 rounded-lg text-white hover:bg-white/20 transition-colors disabled:opacity-50",children:[a.jsx(X.Z,{className:"w-5 h-5"}),a.jsx("span",{children:"Connect BSV Wallet"})]})]}),(0,a.jsxs)("p",{className:"mt-6 text-center text-sm text-gray-400",children:[t?"Already have an account?":"Don't have an account?"," ",a.jsx("button",{onClick:()=>r(!t),className:"text-bitcoin-orange hover:text-yellow-500 font-medium",children:t?"Sign In":"Sign Up"})]})]})})}function HomePage(){let{data:e}=(0,n.useSession)(),[t,r]=(0,s.useState)("studio"),[i,o]=(0,s.useState)(280),[l,d]=(0,s.useState)(!1),[c,p]=(0,s.useState)(!1),x=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let handleMouseMove=e=>{if(!l)return;let t=Math.min(Math.max(200,e.clientX),600);o(t)},handleMouseUp=()=>{d(!1)};return l&&(document.addEventListener("mousemove",handleMouseMove),document.addEventListener("mouseup",handleMouseUp)),()=>{document.removeEventListener("mousemove",handleMouseMove),document.removeEventListener("mouseup",handleMouseUp)}},[l]),(0,a.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 28px)",background:"#0a0a0a",overflow:"hidden"},children:[(0,a.jsxs)("div",{style:{width:`${i}px`,background:"linear-gradient(180deg, #1a1a1a 0%, #141414 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",position:"relative"},children:[a.jsx(MusicSidebar,{currentView:t,onViewChange:r,onAuthRequired:()=>p(!0)}),a.jsx("div",{ref:x,onMouseDown:()=>d(!0),style:{position:"absolute",right:0,top:0,bottom:0,width:"4px",cursor:"col-resize",background:l?"rgba(139, 92, 246, 0.5)":"transparent",transition:"background 0.2s"},onMouseEnter:e=>{l||(e.currentTarget.style.background="rgba(139, 92, 246, 0.3)")},onMouseLeave:e=>{l||(e.currentTarget.style.background="transparent")}})]}),a.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",background:"#0a0a0a"},children:(()=>{switch(t){case"studio":default:return a.jsx(StudioInterface,{});case"marketplace":return a.jsx(MarketplaceView,{});case"library":return a.jsx(LibraryView,{});case"exchange":return a.jsx(ExchangeView,{})}})()}),c&&a.jsx(AuthModal,{onClose:()=>p(!1)})]})}},83982:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=r(95153);let s=(0,a.createProxy)(String.raw`/Users/b0ase/Projects/bitcoin-music/app/page.tsx`),{__esModule:n,$$typeof:i}=s,o=s.default,l=o}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[657,981,991,87,283,43],()=>__webpack_exec__(84866));module.exports=r})();